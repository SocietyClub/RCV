(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[122],{6818:function(e,t,r){"use strict";var i=r(4836);t.Z=void 0;var a=i(r(4938)),s=r(5893),n=(0,a.default)((0,s.jsx)("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"}),"Save");t.Z=n},754:function(e,t,r){"use strict";r.d(t,{Z:function(){return N}});var i=r(3366),a=r(7462),s=r(7294),n=r(6010),o=r(4780),l=r(917),c=r(6622),d=r(5959),u=r(7074),h=r(4867);function v(e){return(0,h.Z)("MuiCircularProgress",e)}(0,r(1588).Z)("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);var m=r(5893);const f=["className","color","disableShrink","size","style","thickness","value","variant"];let g,p,x,k,S=e=>e;const Z=44,y=(0,l.F4)(g||(g=S`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`)),w=(0,l.F4)(p||(p=S`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -125px;
  }
`)),C=(0,u.ZP)("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],t[`color${(0,c.Z)(r.color)}`]]}})((({ownerState:e,theme:t})=>(0,a.Z)({display:"inline-block"},"determinate"===e.variant&&{transition:t.transitions.create("transform")},"inherit"!==e.color&&{color:(t.vars||t).palette[e.color].main})),(({ownerState:e})=>"indeterminate"===e.variant&&(0,l.iv)(x||(x=S`
      animation: ${0} 1.4s linear infinite;
    `),y))),_=(0,u.ZP)("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(e,t)=>t.svg})({display:"block"}),P=(0,u.ZP)("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.circle,t[`circle${(0,c.Z)(r.variant)}`],r.disableShrink&&t.circleDisableShrink]}})((({ownerState:e,theme:t})=>(0,a.Z)({stroke:"currentColor"},"determinate"===e.variant&&{transition:t.transitions.create("stroke-dashoffset")},"indeterminate"===e.variant&&{strokeDasharray:"80px, 200px",strokeDashoffset:0})),(({ownerState:e})=>"indeterminate"===e.variant&&!e.disableShrink&&(0,l.iv)(k||(k=S`
      animation: ${0} 1.4s ease-in-out infinite;
    `),w)));var N=s.forwardRef((function(e,t){const r=(0,d.Z)({props:e,name:"MuiCircularProgress"}),{className:s,color:l="primary",disableShrink:u=!1,size:h=40,style:g,thickness:p=3.6,value:x=0,variant:k="indeterminate"}=r,S=(0,i.Z)(r,f),y=(0,a.Z)({},r,{color:l,disableShrink:u,size:h,thickness:p,value:x,variant:k}),w=(e=>{const{classes:t,variant:r,color:i,disableShrink:a}=e,s={root:["root",r,`color${(0,c.Z)(i)}`],svg:["svg"],circle:["circle",`circle${(0,c.Z)(r)}`,a&&"circleDisableShrink"]};return(0,o.Z)(s,v,t)})(y),N={},j={},b={};if("determinate"===k){const e=2*Math.PI*((Z-p)/2);N.strokeDasharray=e.toFixed(3),b["aria-valuenow"]=Math.round(x),N.strokeDashoffset=`${((100-x)/100*e).toFixed(3)}px`,j.transform="rotate(-90deg)"}return(0,m.jsx)(C,(0,a.Z)({className:(0,n.Z)(w.root,s),style:(0,a.Z)({width:h,height:h},j,g),ownerState:y,ref:t,role:"progressbar"},b,S,{children:(0,m.jsx)(_,{className:w.svg,ownerState:y,viewBox:"22 22 44 44",children:(0,m.jsx)(P,{className:w.circle,style:N,ownerState:y,cx:Z,cy:Z,r:(Z-p)/2,fill:"none",strokeWidth:p})})}))}))},9127:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/updatePoll/[id]",function(){return r(526)}])},526:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return S}});var i=r(828),a=r(5893),s=r(2741),n=r(5084),o=r(6e3),l=r(3667),c=r(7294),d=r(6818),u=r(9630),h=r(1283),v=r.n(h),m=r(9542),f=r(754),g=r(9942);function p(e){var t=e.showCircle;return t?(0,a.jsx)(g.Z,{in:t,style:{transitionDelay:t?"800ms":"0ms"},unmountOnExit:!0,children:(0,a.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:(0,a.jsx)(f.Z,{})})}):null}var x=r(4153),k=r(1163),S=function(){var e,t,r=(0,k.useRouter)(),h=r.query.id,f=(0,c.useState)(""),g=f[0],S=f[1],Z=(0,c.useState)(3),y=Z[0],w=Z[1],C=(0,c.useState)([]),_=C[0],P=C[1],N=(0,i.Z)((0,x.i)(m.Dq),2),j=N[0],b=N[1],I=(0,i.Z)((0,x.i)(m.Ms),2),L=I[0],M=I[1],R=(0,c.useState)(null),E=R[0],F=R[1];(0,c.useEffect)((function(){r.isReady&&b(String(h))}),[r.isReady,h]),(0,c.useEffect)((function(){j.data&&(S(j.data.pollName),w(j.data.maxNumRankedChoiceCount),P(j.data.candidateList))}),[j.data]),(0,c.useEffect)((function(){var e;j.isInitial||(j.isLoading||j.isSuccess||F({severity:"error",message:"An error has occured while loading the poll"}),(j.isLoading||j.isSuccess)&&F(null),j.isSuccess&&!(null===(e=j.data)||void 0===e?void 0:e.userIsCreator)&&F({severity:"error",message:"You are not allowed to edit a poll you did not create"}))}),[j.isInitial,j.isLoading,j.isSuccess]),(0,c.useEffect)((function(){L.isInitial||(L.isLoading||L.isSuccess||F({severity:"error",message:"An error has occured while updating the poll",errorMessages:L.messages}),(L.isLoading||L.isSuccess)&&F(null))}),[L.isInitial,L.isLoading,L.isSuccess]);var D=!j.isLoading&&(null===(e=j.data)||void 0===e?void 0:e.userIsCreator),$=!j.isLoading&&!(null===(t=j.data)||void 0===t?void 0:t.userIsCreator);return(0,a.jsxs)(o.Z,{alert:E,children:[(0,a.jsx)(u.Z,{variant:"h3",children:"Edit Poll"}),(0,a.jsx)(p,{showCircle:j.isLoading}),D&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.Z,{textFieldClassName:v().candidateTextField,pollName:g,maxNumRankedChoiceCount:y,candidateList:_,setPollName:S,setMaxNumRankedChoiceCount:w,setCandidateList:P}),(0,a.jsx)(s.Z,{style:{margin:"1rem 0",padding:"0.5rem"},severity:"warning",children:"When you update the poll, all the current votes that were made will be erased. This is to ensure all voters saw the same poll at the time of voting."}),(0,a.jsx)(n.Z,{className:v().updatePollButton,variant:"contained",startIcon:(0,a.jsx)(d.Z,{}),color:"success",onClick:function(){var e={pollName:g,maxNumRankedChoiceCount:y,candidateList:_};M(String(h),e).then((function(){var e;r.push("/vote/".concat(null===j||void 0===j||null===(e=j.data)||void 0===e?void 0:e.pollId))})).catch((function(){F({severity:"error",message:"An error has occured while updating the poll"})}))},children:"Update Poll"})]}),(0,a.jsx)(p,{showCircle:L.isLoading&&!L.isInitial}),$&&(0,a.jsx)(u.Z,{variant:"subtitle1",children:"You do not have permission to edit this Poll"})]})}},1283:function(e){e.exports={textField:"_id__textField__1Xf37",candidateTextField:"_id__candidateTextField__88Uxg",updatePollButton:"_id__updatePollButton__Ivg98"}}},function(e){e.O(0,[789,281,357,774,888,179],(function(){return t=9127,e(e.s=t);var t}));var t=e.O();_N_E=t}]);