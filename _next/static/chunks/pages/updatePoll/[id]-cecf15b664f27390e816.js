(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[122],{6818:function(e,t,n){"use strict";var a=n(5318);t.Z=void 0;var i=a(n(4938)),o=n(5893),s=(0,i.default)((0,o.jsx)("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"}),"Save");t.Z=s},6165:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var a=n(7294),i=n(1002),o=n(6186),s=n(7512),r=n.n(s),c=n(5893),d=function(e){return(0,c.jsx)("div",{className:r().sidebar,children:e.children})},u=n(9035),l=n.n(u),m=function(e){var t=(0,a.useState)(!1),n=t[0],s=t[1],r=(0,a.useState)(null),d=r[0],u=r[1],m=function(){s(!1)};return(0,a.useEffect)((function(){e.alert?(u(e.alert),s(!0)):m()}),[e.alert]),(0,c.jsxs)("div",{className:l().page,children:[(0,c.jsxs)("div",{className:l().contentContainer,children:[(0,c.jsx)("div",{className:l().mainContent,children:e.children}),e.sidebar]}),(0,c.jsx)(i.Z,{open:n,onClose:m,autoHideDuration:e.autoHideAlertMilliSeconds,children:(0,c.jsx)(o.Z,{onClose:m,severity:null===d||void 0===d?void 0:d.severity,children:null===d||void 0===d?void 0:d.message})})]})};m.defaultProps={sidebar:(0,c.jsx)(d,{}),alert:null};var f=m},1346:function(e,t,n){"use strict";n.d(t,{Z:function(){return C}});var a=n(7294),i=n(2658),o=n(351),s=n(3789),r=n(2642),c=n(1947),d=n.n(c),u=n(5893),l=function(e){var t=(0,a.useState)(!0),n=t[0],c=t[1],l=(0,a.useCallback)((function(){var t=document.querySelectorAll("."+e.textFieldClassName+":last-of-type input")[0];t&&t.focus&&t.focus()}),[e.textFieldClassName]),m=function(t){"Enter"===t.key&&(c(!n),e.setCandidateList([].concat((0,s.Z)(e.candidateList),[{name:""}])))},f=function(t){var n=Number(t.target.name),a=(0,s.Z)(e.candidateList);a[n]={name:t.target.value},e.setCandidateList(a)};return(0,a.useEffect)((function(){l()}),[n,l]),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(i.Z,{variant:"h4",children:"Candidates"}),e.candidateList.map((function(t,n){return(0,u.jsx)(o.Z,{name:String(n),className:e.textFieldClassName,onKeyPress:m,label:"Candidate Name",variant:"filled",value:t.name,onChange:f},n)})),(0,u.jsx)(r.Z,{className:d().addCandidateButton,variant:"contained",onClick:function(){c(!n),e.setCandidateList([].concat((0,s.Z)(e.candidateList),[{name:""}]))},children:"Add Candidate"})]})};l.defaultProps={};var m=l,f=n(4347),h=function(e){var t=Math.max(10,e.candidateList.length);return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(i.Z,{variant:"h4",children:"Poll Details"}),(0,u.jsx)(o.Z,{className:e.textFieldClassName,label:"Poll Title",id:"poll-title",variant:"filled",value:e.pollName,onChange:function(t){return e.setPollName(t.target.value)}}),(0,u.jsx)(o.Z,{className:e.textFieldClassName,label:"Number of Ranked Choices",id:"ranked-choice-count",select:!0,variant:"filled",value:e.maxNumRankedChoiceCount,onChange:function(t){return e.setMaxNumRankedChoiceCount(Number(t.target.value))},children:Array(t).fill(0).map((function(e,t){return(0,u.jsx)(f.Z,{value:t+1,children:t+1},t+1)}))}),(0,u.jsx)(m,{candidateList:e.candidateList,setCandidateList:e.setCandidateList,textFieldClassName:e.textFieldClassName})]})};h.defaultProps={};var C=h},7392:function(e,t,n){"use strict";n.d(t,{QP:function(){return i},Ms:function(){return o},Dq:function(){return s},Qh:function(){return r},zF:function(){return c}});var a="http://localhost:8080",i=function(e,t){return fetch("".concat(a,"/ranked-choice-vote/v1/poll"),{method:"POST",mode:"cors",headers:{"Content-Type":"application/json","X-USER-ID":e},body:JSON.stringify(t)}).then((function(e){return e.ok?e:e.json().then((function(e){return Promise.reject({data:null,messages:[]})}))})).then((function(e){return e.json()}))},o=function(e,t,n){return fetch("".concat(a,"/ranked-choice-vote/v1/poll/").concat(t),{method:"PATCH",mode:"cors",headers:{"Content-Type":"application/json","X-USER-ID":e},body:JSON.stringify(n)}).then((function(e){return e.ok?e:e.json().then((function(e){return Promise.reject({data:null,messages:[]})}))})).then((function(e){return e.json()}))},s=function(e,t){return fetch("".concat(a,"/ranked-choice-vote/v1/poll/").concat(t),{method:"GET",mode:"cors",headers:{"Content-Type":"application/json","X-USER-ID":e}}).then((function(e){return e.ok?e:e.json().then((function(e){return Promise.reject({data:null,messages:[]})}))})).then((function(e){return e.json()}))},r=function(e,t,n){return fetch("".concat(a,"/ranked-choice-vote/v1/poll/").concat(t,"/vote"),{method:"POST",mode:"cors",headers:{"Content-Type":"application/json","X-USER-ID":e},body:JSON.stringify(n)}).then((function(e){return e.ok?e:e.json().then((function(e){return Promise.reject({data:null,messages:[]})}))})).then((function(e){return e.json()}))},c=function(e,t){return fetch("".concat(a,"/ranked-choice-vote/v1/poll/").concat(t,"/results"),{method:"GET",mode:"cors",headers:{"Content-Type":"application/json","X-USER-ID":e}}).then((function(e){console.log(e);return Promise.resolve({messages:[],data:{pollId:"test-do-not-deleto",pollName:"This is a test poll",totalEntries:13,totalSteps:3,maxNumRankedChoiceCount:2,winner:"spoodermann",steps:[{stepId:0,candidateList:[{name:"spoodermann",eliminated:!1,votes:[{firstChoiceCandidate:"spoodermann",voteCount:3}]},{name:"batman",eliminated:!1,votes:[{firstChoiceCandidate:"batman",voteCount:4}]},{name:"peach",eliminated:!1,votes:[{firstChoiceCandidate:"peach",voteCount:3}]},{name:"mario",eliminated:!1,votes:[{firstChoiceCandidate:"mario",voteCount:2}]},{name:"luigi",eliminated:!1,votes:[{firstChoiceCandidate:"luigi",voteCount:1}]}]},{stepId:1,candidateList:[{name:"spoodermann",eliminated:!1,votes:[{firstChoiceCandidate:"spoodermann",voteCount:3},{firstChoiceCandidate:"luigi",voteCount:1}]},{name:"batman",eliminated:!1,votes:[{firstChoiceCandidate:"batman",voteCount:4}]},{name:"peach",eliminated:!1,votes:[{firstChoiceCandidate:"peach",voteCount:3}]},{name:"mario",eliminated:!1,votes:[{firstChoiceCandidate:"mario",voteCount:2}]},{name:"luigi",eliminated:!0,votes:[{firstChoiceCandidate:"luigi",voteCount:1}]}]},{stepId:2,candidateList:[{name:"spoodermann",eliminated:!1,votes:[{firstChoiceCandidate:"spoodermann",voteCount:3},{firstChoiceCandidate:"luigi",voteCount:1},{firstChoiceCandidate:"mario",voteCount:2}]},{name:"batman",eliminated:!1,votes:[{firstChoiceCandidate:"batman",voteCount:4}]},{name:"peach",eliminated:!1,votes:[{firstChoiceCandidate:"peach",voteCount:3}]},{name:"mario",eliminated:!0,votes:[{firstChoiceCandidate:"mario",voteCount:2}]},{name:"luigi",eliminated:!0,votes:[{firstChoiceCandidate:"luigi",voteCount:1}]}]}],yourEntry:{choices:[{choicePosition:0,candidate:{name:"mario"}},{choicePosition:1,candidate:{name:"spoodermann"}}]}}})}))}},2175:function(e,t,n){"use strict";n.d(t,{i:function(){return l}});var a=n(2809),i=n(7294),o=n(318),s=n(6645),r=n(4586);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u={data:null,messages:[],isLoading:!1,isSuccess:!1,isInitial:!0};function l(e){var t=(0,i.useState)(u),n=t[0],a=t[1],c=function(){var e=(0,s.Z)(["X-USER-ID"]),t=(0,o.Z)(e,3),n=t[0],a=t[1];if(t[2],!n["X-USER-ID"]){var i=(0,r.Z)();return a("X-USER-ID",i,{path:"/"}),i}return n["X-USER-ID"]}();return[n,function(){a(d(d({},u),{},{isLoading:!0,isInitial:!1}));for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return e.apply(void 0,[String(c)].concat(n)).then((function(e){var t={data:e.data,messages:e.messages,isLoading:!1,isSuccess:!0,isInitial:!1};return a(t),t})).catch((function(e){var t={data:e.data,messages:e.messages,isLoading:!1,isSuccess:!1,isInitial:!1};return a(t),t}))}]}},3328:function(e,t,n){"use strict";n.r(t);var a=n(318),i=n(1163),o=n(7294),s=n(2658),r=n(2642),c=n(6818),d=n(6165),u=n(5416),l=n.n(u),m=n(7392),f=n(1346),h=n(2175),C=n(5893);t.default=function(){var e=(0,i.useRouter)(),t=e.query.id,n=(0,o.useState)(""),u=n[0],v=n[1],p=(0,o.useState)(3),g=p[0],j=p[1],x=(0,o.useState)([]),S=x[0],_=x[1],N=(0,h.i)(m.Dq),y=(0,a.Z)(N,2),b=y[0],P=y[1],L=(0,h.i)(m.Ms),E=(0,a.Z)(L,2),k=E[0],Z=E[1],O=(0,o.useState)(null),I=O[0],R=O[1];(0,o.useEffect)((function(){e.isReady&&P(String(t))}),[e.isReady,t]),(0,o.useEffect)((function(){b.data&&(v(b.data.pollName),j(b.data.maxNumRankedChoiceCount),_(b.data.candidateList))}),[b.data]),(0,o.useEffect)((function(){b.isInitial||(b.isLoading||b.isSuccess||R({severity:"error",message:"An error has occured while loading the poll"}),(b.isLoading||b.isSuccess)&&R(null))}),[b.isInitial,b.isLoading,b.isSuccess]),(0,o.useEffect)((function(){k.isInitial||(k.isLoading||k.isSuccess||R({severity:"error",message:"An error has occured while updating the poll"}),(k.isLoading||k.isSuccess)&&R(null))}),[k.isInitial,k.isLoading,k.isSuccess]);return(0,C.jsxs)(d.Z,{alert:I,children:[(0,C.jsx)(s.Z,{variant:"h3",children:"Edit Poll"}),(0,C.jsx)(f.Z,{textFieldClassName:l().candidateTextField,pollName:u,maxNumRankedChoiceCount:g,candidateList:S,setPollName:v,setMaxNumRankedChoiceCount:j,setCandidateList:_}),(0,C.jsx)(r.Z,{className:l().updatePollButton,variant:"contained",startIcon:(0,C.jsx)(c.Z,{}),color:"success",onClick:function(){var n={pollName:u,maxNumRankedChoiceCount:g,candidateList:S};Z(String(t),n).then((function(){var t;e.push("/vote/".concat(null===b||void 0===b||null===(t=b.data)||void 0===t?void 0:t.pollId))})).catch((function(){R({severity:"error",message:"An error has occured while updating the poll"})}))},children:"Update Poll"})]})}},3270:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/updatePoll/[id]",function(){return n(3328)}])},1947:function(e){e.exports={addCandidateButton:"CandidateInputList_addCandidateButton__1jCCi"}},9035:function(e){e.exports={page:"Page_page__1hHHt",contentContainer:"Page_contentContainer__12rAS",mainContent:"Page_mainContent__GcSbW"}},7512:function(e){e.exports={sidebar:"Sidebar_sidebar__1wPFG"}},5416:function(e){e.exports={textField:"_id__textField__OjyV9",candidateTextField:"_id__candidateTextField__2kmi8",updatePollButton:"_id__updatePollButton__2__E1"}}},function(e){e.O(0,[859,799,774,888,179],(function(){return t=3270,e(e.s=t);var t}));var t=e.O();_N_E=t}]);