(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[750],{6540:function(e,t,n){"use strict";var a=n(4836);t.Z=void 0;var i=a(n(4938)),s=n(5893),r=(0,i.default)((0,s.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add");t.Z=r},9885:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/createPoll",function(){return n(4078)}])},4007:function(e,t,n){"use strict";n.d(t,{Z:function(){return h}});var a=n(5893),i=n(7294),s=n(6798),r=n(1737),o=n(7102),c=n.n(o),u=function(e){return(0,a.jsx)("div",{className:c().sidebar,children:e.children})},l=n(1973),d=n.n(l),f=function(e){var t=(0,i.useState)(!1),n=t[0],o=t[1],c=(0,i.useState)(null),u=c[0],l=c[1],f=function(){o(!1)};return(0,i.useEffect)((function(){e.alert?(l(e.alert),o(!0)):f()}),[e.alert]),(0,a.jsxs)("div",{className:d().page,children:[(0,a.jsxs)("div",{className:d().contentContainer,children:[(0,a.jsx)("div",{className:d().mainContent,children:e.children}),e.sidebar]}),(0,a.jsx)(s.Z,{open:n,onClose:f,autoHideDuration:e.autoHideAlertMilliSeconds,children:(0,a.jsxs)(r.Z,{onClose:f,severity:null===u||void 0===u?void 0:u.severity,children:[null===u||void 0===u?void 0:u.message,(null===u||void 0===u?void 0:u.errorMessages)&&u.errorMessages.map((function(e){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("br",{}),e.messageContent]})}))]})})]})};f.defaultProps={sidebar:(0,a.jsx)(u,{}),alert:null};var h=f},532:function(e,t,n){"use strict";n.d(t,{Z:function(){return C}});var a=n(5893),i=n(7294),s=n(5861),r=n(6664),o=n(9815),c=n(3946),u=n(3321),l=n(6761),d=n(6853),f=n.n(d),h=function(e){var t=(0,i.useState)(!0),n=t[0],d=t[1],h=(0,i.useCallback)((function(){var t=document.querySelectorAll("."+e.textFieldClassName+":last-of-type input")[0];t&&t.focus&&t.focus()}),[e.textFieldClassName]),m=function(t){"Enter"===t.key&&(d(!n),e.setCandidateList((0,o.Z)(e.candidateList).concat([{name:""}])))},v=function(t){var n=Number(t.target.name),a=(0,o.Z)(e.candidateList);a[n]={name:t.target.value},e.setCandidateList(a)};return(0,i.useEffect)((function(){h()}),[n,h]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.Z,{variant:"h4",children:"Candidates"}),e.candidateList.map((function(t,n){return(0,a.jsxs)("div",{style:{display:"flex"},children:[(0,a.jsx)(r.Z,{style:{flexGrow:1},name:String(n),className:e.textFieldClassName,onKeyPress:m,label:"Candidate Name",variant:"filled",value:t.name,onChange:v},n),(0,a.jsx)(c.Z,{"aria-label":"delete",onClick:function(){return function(t){e.candidateList.splice(t,1),e.setCandidateList((0,o.Z)(e.candidateList))}(n)},children:(0,a.jsx)(l.Z,{})},n)]},n)})),(0,a.jsx)(u.Z,{className:f().addCandidateButton,variant:"contained",onClick:function(){d(!n),e.setCandidateList((0,o.Z)(e.candidateList).concat([{name:""}]))},children:"Add Candidate"})]})};h.defaultProps={};var m=h,v=n(5819),p=function(e){var t=Math.max(10,e.candidateList.length);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.Z,{variant:"h4",children:"Poll Details"}),(0,a.jsx)(r.Z,{className:e.textFieldClassName,label:"Poll Title",id:"poll-title",variant:"filled",value:e.pollName,onChange:function(t){return e.setPollName(t.target.value)}}),(0,a.jsx)(r.Z,{className:e.textFieldClassName,label:"Number of Ranked Choices",id:"ranked-choice-count",select:!0,variant:"filled",value:e.maxNumRankedChoiceCount,onChange:function(t){return e.setMaxNumRankedChoiceCount(Number(t.target.value))},children:Array(t).fill(0).map((function(e,t){return(0,a.jsx)(v.Z,{value:t+1,children:t+1},t+1)}))}),(0,a.jsx)(m,{candidateList:e.candidateList,setCandidateList:e.setCandidateList,textFieldClassName:e.textFieldClassName})]})};p.defaultProps={};var C=p},9542:function(e,t,n){"use strict";n.d(t,{Dq:function(){return s},Ms:function(){return i},QP:function(){return a},Qh:function(){return r},zF:function(){return o}});var a=function(e,t){return fetch("/api/v1/poll",{method:"POST",mode:"cors",headers:{"Content-Type":"application/json","X-USER-ID":e},body:JSON.stringify(t)}).then((function(e){return e.ok?e:e.json().then((function(e){return Promise.reject({data:e.data,messages:e.messages})}))})).then((function(e){return e.json()}))},i=function(e,t,n){return fetch("/api/v1/poll/".concat(t),{method:"PATCH",mode:"cors",headers:{"Content-Type":"application/json","X-USER-ID":e},body:JSON.stringify(n)}).then((function(e){return e.ok?e:e.json().then((function(e){return Promise.reject({data:e.data,messages:e.messages})}))})).then((function(e){return e.json()}))},s=function(e,t){return fetch("/api/v1/poll/".concat(t),{method:"GET",mode:"cors",headers:{"Content-Type":"application/json","X-USER-ID":e}}).then((function(e){return e.ok?e:e.json().then((function(e){return Promise.reject({data:e.data,messages:e.messages})}))})).then((function(e){return e.json()}))},r=function(e,t,n){return fetch("/api/v1/poll/".concat(t,"/vote"),{method:"POST",mode:"cors",headers:{"Content-Type":"application/json","X-USER-ID":e},body:JSON.stringify(n)}).then((function(e){return e.ok?e:e.json().then((function(e){return Promise.reject({data:e.data,messages:e.messages})}))})).then((function(e){return e.json()}))},o=function(e,t){return fetch("/api/v1/poll/".concat(t,"/results"),{method:"GET",mode:"cors",headers:{"Content-Type":"application/json","X-USER-ID":e}}).then((function(e){return e.ok?e:e.json().then((function(e){return Promise.reject({data:e.data,messages:e.messages})}))})).then((function(e){return e.json()}))}},393:function(e,t,n){"use strict";n.d(t,{i:function(){return d}});var a=n(1799),i=n(9396),s=n(9815),r=n(7294),o=n(828),c=n(708),u=n(5934),l={data:null,messages:[],isLoading:!1,isSuccess:!1,isInitial:!0};function d(e){var t=(0,r.useState)(l),n=t[0],d=t[1],f=function(){var e=(0,o.Z)((0,c.Z)(["X-USER-ID"]),3),t=e[0],n=e[1];if(e[2],!t["X-USER-ID"]){var a=(0,u.Z)();return n("X-USER-ID",a,{path:"/"}),a}return t["X-USER-ID"]}();return[n,function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return d((0,i.Z)((0,a.Z)({},l),{isLoading:!0,isInitial:!1})),e.apply(void 0,[String(f)].concat((0,s.Z)(n))).then((function(e){var t={data:e.data,messages:e.messages,isLoading:!1,isSuccess:!0,isInitial:!1};return d(t),t})).catch((function(e){var t={data:e.data,messages:e.messages,isLoading:!1,isSuccess:!1,isInitial:!1};return d(t),Promise.reject(t)}))}]}},4078:function(e,t,n){"use strict";n.r(t);var a=n(828),i=n(5893),s=n(7294),r=n(3321),o=n(5861),c=n(6540),u=n(4007),l=n(4828),d=n.n(l),f=n(9542),h=n(532),m=n(393),v=n(1163),p=n.n(v);t.default=function(){var e=(0,s.useState)(""),t=e[0],n=e[1],l=(0,s.useState)(3),v=l[0],C=l[1],g=(0,s.useState)([{name:""}]),x=g[0],j=g[1],N=(0,a.Z)((0,m.i)(f.QP),2),_=N[0],P=N[1],S=(0,s.useState)(null),Z=S[0],L=S[1];(0,s.useEffect)((function(){_.isInitial||(_.isLoading||_.isSuccess||L({severity:"error",message:"An error has occured while creating the poll",errorMessages:_.messages}),(_.isLoading||_.isSuccess)&&L(null))}),[_.isInitial,_.isLoading,_.isSuccess]);return(0,i.jsxs)(u.Z,{alert:Z,children:[(0,i.jsx)(o.Z,{variant:"h3",children:"Create a New Poll"}),(0,i.jsx)(h.Z,{textFieldClassName:d().candidateTextField,pollName:t,maxNumRankedChoiceCount:v,candidateList:x,setPollName:n,setMaxNumRankedChoiceCount:C,setCandidateList:j}),(0,i.jsx)(r.Z,{className:d().createPollButton,variant:"contained",startIcon:(0,i.jsx)(c.Z,{}),color:"success",onClick:function(){P({pollName:t,maxNumRankedChoiceCount:v,candidateList:x}).then((function(e){var t;p().push("/vote/".concat(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.pollId))})).catch((function(){L({severity:"error",message:"An error has occured while creating the poll"})}))},children:"Create Poll"})]})}},6853:function(e){e.exports={addCandidateButton:"CandidateInputList_addCandidateButton__nYhqX"}},1973:function(e){e.exports={page:"Page_page__WUVFs",contentContainer:"Page_contentContainer__BRpFP",mainContent:"Page_mainContent__Wuje1"}},7102:function(e){e.exports={sidebar:"Sidebar_sidebar__78n6f"}},4828:function(e){e.exports={textField:"createPoll_textField__hz3bv",candidateTextField:"createPoll_candidateTextField__lJ_v0",createPollButton:"createPoll_createPollButton__hGmiL"}}},function(e){e.O(0,[133,208,774,888,179],(function(){return t=9885,e(e.s=t);var t}));var t=e.O();_N_E=t}]);