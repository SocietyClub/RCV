(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[297],{6165:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var r=n(7294),i=n(1002),o=n(6186),a=n(7512),s=n.n(a),c=n(5893),d=function(e){return(0,c.jsx)("div",{className:s().sidebar,children:e.children})},l=n(9035),u=n.n(l),f=function(e){var t=(0,r.useState)(!1),n=t[0],a=t[1],s=(0,r.useState)(null),d=s[0],l=s[1],f=function(){a(!1)};return(0,r.useEffect)((function(){e.alert?(l(e.alert),a(!0)):f()}),[e.alert]),(0,c.jsxs)("div",{className:u().page,children:[(0,c.jsxs)("div",{className:u().contentContainer,children:[(0,c.jsx)("div",{className:u().mainContent,children:e.children}),e.sidebar]}),(0,c.jsx)(i.Z,{open:n,onClose:f,autoHideDuration:e.autoHideAlertMilliSeconds,children:(0,c.jsx)(o.Z,{onClose:f,severity:null===d||void 0===d?void 0:d.severity,children:null===d||void 0===d?void 0:d.message})})]})};f.defaultProps={sidebar:(0,c.jsx)(d,{}),alert:null};var p=f},7392:function(e,t,n){"use strict";n.d(t,{QP:function(){return i},Ms:function(){return o},Dq:function(){return a},Qh:function(){return s},zF:function(){return c}});var r="http://localhost:8080",i=function(e,t){return fetch("".concat(r,"/ranked-choice-vote/v1/poll"),{method:"POST",mode:"cors",headers:{"Content-Type":"application/json","X-USER-ID":e},body:JSON.stringify(t)}).then((function(e){return e.ok?e:e.json().then((function(e){return Promise.reject({data:null,messages:[]})}))})).then((function(e){return e.json()}))},o=function(e,t,n){return fetch("".concat(r,"/ranked-choice-vote/v1/poll/").concat(t),{method:"PATCH",mode:"cors",headers:{"Content-Type":"application/json","X-USER-ID":e},body:JSON.stringify(n)}).then((function(e){return e.ok?e:e.json().then((function(e){return Promise.reject({data:null,messages:[]})}))})).then((function(e){return e.json()}))},a=function(e,t){return fetch("".concat(r,"/ranked-choice-vote/v1/poll/").concat(t),{method:"GET",mode:"cors",headers:{"Content-Type":"application/json","X-USER-ID":e}}).then((function(e){return e.ok?e:e.json().then((function(e){return Promise.reject({data:null,messages:[]})}))})).then((function(e){return e.json()}))},s=function(e,t,n){return fetch("".concat(r,"/ranked-choice-vote/v1/poll/").concat(t,"/vote"),{method:"POST",mode:"cors",headers:{"Content-Type":"application/json","X-USER-ID":e},body:JSON.stringify(n)}).then((function(e){return e.ok?e:e.json().then((function(e){return Promise.reject({data:null,messages:[]})}))})).then((function(e){return e.json()}))},c=function(e,t){return fetch("".concat(r,"/ranked-choice-vote/v1/poll/").concat(t,"/results"),{method:"GET",mode:"cors",headers:{"Content-Type":"application/json","X-USER-ID":e}}).then((function(e){console.log(e);return Promise.resolve({messages:[],data:{pollId:"test-do-not-deleto",pollName:"This is a test poll",totalEntries:13,totalSteps:3,maxNumRankedChoiceCount:2,winner:"spoodermann",steps:[{stepId:0,candidateList:[{name:"spoodermann",eliminated:!1,votes:[{firstChoiceCandidate:"spoodermann",voteCount:3}]},{name:"batman",eliminated:!1,votes:[{firstChoiceCandidate:"batman",voteCount:4}]},{name:"peach",eliminated:!1,votes:[{firstChoiceCandidate:"peach",voteCount:3}]},{name:"mario",eliminated:!1,votes:[{firstChoiceCandidate:"mario",voteCount:2}]},{name:"luigi",eliminated:!1,votes:[{firstChoiceCandidate:"luigi",voteCount:1}]}]},{stepId:1,candidateList:[{name:"spoodermann",eliminated:!1,votes:[{firstChoiceCandidate:"spoodermann",voteCount:3},{firstChoiceCandidate:"luigi",voteCount:1}]},{name:"batman",eliminated:!1,votes:[{firstChoiceCandidate:"batman",voteCount:4}]},{name:"peach",eliminated:!1,votes:[{firstChoiceCandidate:"peach",voteCount:3}]},{name:"mario",eliminated:!1,votes:[{firstChoiceCandidate:"mario",voteCount:2}]},{name:"luigi",eliminated:!0,votes:[{firstChoiceCandidate:"luigi",voteCount:1}]}]},{stepId:2,candidateList:[{name:"spoodermann",eliminated:!1,votes:[{firstChoiceCandidate:"spoodermann",voteCount:3},{firstChoiceCandidate:"luigi",voteCount:1},{firstChoiceCandidate:"mario",voteCount:2}]},{name:"batman",eliminated:!1,votes:[{firstChoiceCandidate:"batman",voteCount:4}]},{name:"peach",eliminated:!1,votes:[{firstChoiceCandidate:"peach",voteCount:3}]},{name:"mario",eliminated:!0,votes:[{firstChoiceCandidate:"mario",voteCount:2}]},{name:"luigi",eliminated:!0,votes:[{firstChoiceCandidate:"luigi",voteCount:1}]}]}],yourEntry:{choices:[{choicePosition:0,candidate:{name:"mario"}},{choicePosition:1,candidate:{name:"spoodermann"}}]}}})}))}},2175:function(e,t,n){"use strict";n.d(t,{i:function(){return u}});var r=n(2809),i=n(7294),o=n(318),a=n(6645),s=n(4586);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var l={data:null,messages:[],isLoading:!1,isSuccess:!1,isInitial:!0};function u(e){var t=(0,i.useState)(l),n=t[0],r=t[1],c=function(){var e=(0,a.Z)(["X-USER-ID"]),t=(0,o.Z)(e,3),n=t[0],r=t[1];if(t[2],!n["X-USER-ID"]){var i=(0,s.Z)();return r("X-USER-ID",i,{path:"/"}),i}return n["X-USER-ID"]}();return[n,function(){r(d(d({},l),{},{isLoading:!0,isInitial:!1}));for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return e.apply(void 0,[String(c)].concat(n)).then((function(e){var t={data:e.data,messages:e.messages,isLoading:!1,isSuccess:!0,isInitial:!1};return r(t),t})).catch((function(e){var t={data:e.data,messages:e.messages,isLoading:!1,isSuccess:!1,isInitial:!1};return r(t),t}))}]}},57:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSG:function(){return Z},default:function(){return N}});var r=n(318),i=n(2809),o=n(7294),a=n(1163),s=n(2642),c=n(6165),d=n(3789),l=n(2658),u=n(5948),f=n(326),p=n(1508),h=n(1080),m=n.n(h),v=n(5893);var C=function(e){var t=e.candidateName,n={display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",background:"white",zIndex:1,width:e.width};return(0,v.jsx)("div",{style:{height:"calc(56px + 1rem)"},children:(0,v.jsxs)(p.Z,{className:m().candidateBoxSize+" "+m().centered,style:n,sx:{boxShadow:3},children:[(0,v.jsx)(l.Z,{variant:"h5",children:t}),(0,v.jsx)(f.Z,{})]})})};var j=function(e){var t=e.children,n={backgroundColor:"rgba(0, 0, 0, 0.12)",color:"rgba(0, 0, 0, 0.38)",border:"1px solid rgba(0, 0, 0, 0.12)",borderRadius:"4px",zIndex:-1,width:e.width};return(0,v.jsx)("div",{className:m().candidateBoxSize+" "+m().centered,style:n,children:(0,v.jsx)(l.Z,{variant:"h5",children:t})})},g=n(7392),b=n(2175);function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var O=function(e){var t=e.pollData,n=e.setPageAlert,i=(0,b.i)(g.Qh),c=(0,r.Z)(i,2),f=(c[0],c[1]),p=(0,o.useState)([]),h=p[0],m=p[1],y=(0,o.useState)([]),O=y[0],P=y[1];(0,o.useEffect)((function(){t.candidateList&&m(t.candidateList.map((function(e){return e.name})))}),[t.candidateList]);var w={candidatesDropId:{list:h,setList:m},chosenCandidatesDropId:{list:O,setList:P}},S=function(e,t,n){var i=Array.from(e),o=i.splice(t,1),a=(0,r.Z)(o,1)[0];return i.splice(n,0,a),i},D=function(e){var r=w[e].list,i="chosenCandidatesDropId"==e&&r.length>=t.maxNumRankedChoiceCount;return i&&n({severity:"warning",message:"You can only choose a max of ".concat(t.maxNumRankedChoiceCount," candidates!")}),!i},k=function(e,t,n,i){var o=(0,d.Z)(e),a=(0,d.Z)(t),s=o.splice(n,1),c=(0,r.Z)(s,1)[0];return a.splice(i,0,c),[o,a]},_="22.5rem";return(0,v.jsxs)("div",{style:{display:"flex",flexDirection:"column",padding:"5rem"},children:[(0,v.jsx)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-around"},children:(0,v.jsxs)("div",{style:{display:"flex",flexDirection:"column",textAlign:"center"},children:[(0,v.jsx)(l.Z,{variant:"h2",children:t.pollName}),(0,v.jsx)(l.Z,{variant:"subtitle2",children:t.pollDesc}),(0,v.jsx)("div",{style:{height:"2rem"}}),(0,v.jsx)(l.Z,{variant:"h5",children:"Drag your selections to the ranked spots on the right."}),(0,v.jsx)("div",{style:{height:"4rem"}})]})}),(0,v.jsx)(u.Z5,{onDragEnd:function(e){var t=e.source,n=e.destination;if(n){var i=t.droppableId,o=n.droppableId;if(i===o){var a=S(w[i].list,t.index,n.index);w[i].setList(a)}else{if(!D(o))return;var s=k(w[i].list,w[o].list,t.index,n.index),c=(0,r.Z)(s,2),d=c[0],l=c[1];w[i].setList(d),w[o].setList(l)}}},children:(0,v.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center"},children:[(0,v.jsx)(u.bK,{droppableId:"candidatesDropId",children:function(e,t){return(0,v.jsxs)("div",x(x({},e.droppableProps),{},{style:{minWidth:_},ref:e.innerRef,children:[h.map((function(e,t){return(0,v.jsx)(u._l,{draggableId:e,index:t,children:function(t,n){return(0,v.jsx)("div",x(x(x({ref:t.innerRef},t.draggableProps),t.dragHandleProps),{},{children:(0,v.jsx)(C,{candidateName:e,width:_})}))}},e)})),e.placeholder]}))}}),(0,v.jsx)("div",{style:{width:"2rem"}}),(0,v.jsx)(u.bK,{droppableId:"chosenCandidatesDropId",children:function(e,n){return(0,v.jsx)(v.Fragment,{children:(0,v.jsxs)("div",x(x({},e.droppableProps),{},{style:{minWidth:_},ref:e.innerRef,children:[(0,v.jsx)("div",{style:{position:"absolute",zIndex:-1},children:Array.from(Array(t.maxNumRankedChoiceCount).keys()).map((function(e){return(0,v.jsxs)(j,{width:_,children:["Candidate ",e+1]},e)}))}),O.map((function(e,t){return(0,v.jsx)(u._l,{draggableId:e,index:t,children:function(t,n){return(0,v.jsx)("div",x(x(x({ref:t.innerRef},t.draggableProps),t.dragHandleProps),{},{children:(0,v.jsx)(C,{candidateName:e,width:_})}))}},e)})),e.placeholder]}))})}})]})}),(0,v.jsx)(s.Z,{variant:"contained",color:"primary",onClick:function(){if(0!=O.length){var e={choices:O.map((function(e,t){return{choicePosition:t+1,candidate:{name:e}}}))};f(t.pollId,e).then((function(){n({severity:"success",message:"Your vote was submitted!"}),a.default.push("/poll/".concat(t.pollId,"/results"))})).catch((function(){n({severity:"error",message:"Failed to submit your vote."})}))}else n({severity:"error",message:"You must choose at least 1 candidate!"})},children:"Submit Your Vote!"})]})},P=n(266),w=n(809),S=n.n(w);var D=function(){var e=(0,o.useState)(null),t=e[0],n=e[1];return[t,function(){var e=(0,P.Z)(S().mark((function e(t){var r;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(r=navigator)&&void 0!==r&&r.clipboard){e.next=3;break}return console.warn("Clipboard not supported"),e.abrupt("return",!1);case 3:return e.prev=3,e.next=6,navigator.clipboard.writeText(t);case 6:return n(t),e.abrupt("return",!0);case 10:return e.prev=10,e.t0=e.catch(3),console.warn("Copy failed",e.t0),n(null),e.abrupt("return",!1);case 15:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}()]};function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var I=function(e){return(0,v.jsx)(s.Z,_(_({},e),{},{style:{marginBottom:"0.5rem"},children:e.children}))},E=function(e){var t=e.onShareClick,n=e.onEditClick,r=e.onCloseClick;return(0,v.jsxs)("div",{style:{display:"flex",flexDirection:"column",minWidth:"8rem",minHeight:"2rem",paddingTop:"5rem"},children:[(0,v.jsx)(I,{variant:"contained",color:"primary",onClick:t,children:"Share"}),(0,v.jsx)(I,{variant:"outlined",onClick:n,children:"Edit Poll"}),(0,v.jsx)(I,{variant:"outlined",onClick:r,children:"Close Poll"})]})};var Z=!0,N=function(){var e=(0,a.useRouter)(),t=(0,b.i)(g.Dq),n=(0,r.Z)(t,2),i=n[0],s=n[1],d=D(),l=(0,r.Z)(d,2),u=(l[0],l[1]);(0,o.useEffect)((function(){if(e.isReady){var t=e.query.id;s(String(t))}}),[e.isReady]);var f=(0,o.useState)(null),p=f[0],h=f[1];return(0,v.jsx)(c.Z,{alert:p,sidebar:(0,v.jsx)(E,{onShareClick:function(){var e,t;u((null===(e=window)||void 0===e||null===(t=e.location)||void 0===t?void 0:t.href)||""),h({message:"Copied the link to your Clipboard",severity:"info"})},onEditClick:function(){var t;e.push("/updatePoll/".concat(null===i||void 0===i||null===(t=i.data)||void 0===t?void 0:t.pollId))},onCloseClick:function(){}}),autoHideAlertMilliSeconds:4e3,children:i.data?(0,v.jsx)(O,{pollData:i.data,setPageAlert:h}):"Loading"})}},9521:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/vote/[id]",function(){return n(57)}])},9035:function(e){e.exports={page:"Page_page__1hHHt",contentContainer:"Page_contentContainer__12rAS",mainContent:"Page_mainContent__GcSbW"}},7512:function(e){e.exports={sidebar:"Sidebar_sidebar__1wPFG"}},1080:function(e){e.exports={candidateBoxSize:"shared_candidateBoxSize__1264_",centered:"shared_centered__TKD3A"}}},function(e){e.O(0,[630,859,649,774,888,179],(function(){return t=9521,e(e.s=t);var t}));var t=e.O();_N_E=t}]);