(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{8562:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return E}});var a=n(318),i=n(1163),r=n(7294),o=n(2658),s=n(9062),d=n(6165),c=n(4822),u=n.n(c),l=n(7392),_=n(2175),p=n(5893);var f=function(){return(0,p.jsx)("div",{children:"Placeholder - To be replaced based on Binam's components"})},v=n(8966),h=n.n(v),m=n(822),y=n.n(m),x=function(t){return(0,p.jsx)(p.Fragment,{children:Array(t.voteCount).fill(0).map((function(e,n){return(0,p.jsx)("div",{className:"".concat(t.candidateStyleProp," ").concat(y().voteLine)},n)}))})};x.defaultProps={};var j=x;function C(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"===typeof t)return S(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return S(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var a=0,i=function(){};return{s:i,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,r=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function S(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}var g=function(t){var e=new Map;t.step.candidateList.forEach((function(t,n){return e.set(t.name,n)}));var n=function(t,e){var n,a=C(t.choices);try{for(a.s();!(n=a.n()).done;){var i,r=n.value,o=C(e.candidateList);try{for(o.s();!(i=o.n()).done;){var s=i.value;if(!s.eliminated&&r.candidate.name===s.name)return s.name}}catch(d){o.e(d)}finally{o.f()}}}catch(d){a.e(d)}finally{a.f()}}(t.yourEntry,t.step),a=t.yourEntry.choices[0].candidate.name;return(0,p.jsx)("div",{children:t.step.candidateList.map((function(t){return(0,p.jsxs)("div",{className:h().vote,children:[(0,p.jsx)("div",{className:"".concat(h().candidateName," ").concat(h()["candidate"+e.get(t.name)]),children:(0,p.jsx)(o.Z,{variant:"body1",children:t.name})}),t.votes.filter((function(){return!t.eliminated})).map((function(i){return n===t.name&&a===i.firstChoiceCandidate?(0,p.jsxs)(r.Fragment,{children:[(0,p.jsx)(j,{voteCount:1,candidateStyleProp:"".concat(h()["candidate"+e.get(i.firstChoiceCandidate)]," ").concat(h().yourVote)}),(0,p.jsx)(j,{voteCount:i.voteCount-1,candidateStyleProp:h()["candidate"+e.get(i.firstChoiceCandidate)]})]},i.firstChoiceCandidate):(0,p.jsx)(j,{voteCount:i.voteCount,candidateStyleProp:h()["candidate"+e.get(i.firstChoiceCandidate)]},i.firstChoiceCandidate)}))]},t.name)}))})};g.defaultProps={};var V=g,E=function(){var t,e,n=(0,i.useRouter)(),c=n.query.id,v=(0,_.i)(l.zF),h=(0,a.Z)(v,2),m=h[0],y=h[1],x=(0,r.useState)(null),C=x[0],S=x[1],g=(0,r.useState)(1),E=g[0],w=g[1];(0,r.useEffect)((function(){n.isReady&&y(String(c))}),[c]),(0,r.useEffect)((function(){m.isInitial||(m.isLoading||m.isSuccess||S({severity:"error",message:"An error has occured while loading the poll results"}),(m.isLoading||m.isSuccess)&&S(null))}),[m.isInitial,m.isLoading,m.isSuccess]);var N=E<=1,b=E>=((null===m||void 0===m||null===(t=m.data)||void 0===t||null===(e=t.steps)||void 0===e?void 0:e.length)||0);return(0,p.jsxs)(d.Z,{alert:C,children:[m.isLoading&&(0,p.jsxs)("div",{children:[(0,p.jsx)(o.Z,{variant:"h3",children:"Loading Poll"}),(0,p.jsx)(s.Z,{})]}),!m.isLoading&&m.data&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(o.Z,{variant:"h2",children:["Poll Question: ",m.data.pollName]}),(0,p.jsxs)(o.Z,{variant:"h3",children:["Winner: ",m.data.winner]}),(0,p.jsx)("div",{className:u().stepCounter,children:(0,p.jsxs)(o.Z,{variant:"subtitle2",children:["Step: ",E," out of ",m.data.steps.length]})}),(0,p.jsxs)("div",{className:u().stepContainer,children:[(0,p.jsx)("div",{className:u().yourVote,children:(0,p.jsx)(f,{})}),(0,p.jsx)("div",{className:"".concat(u().stepArrow," ").concat(N&&u().hidden),onClick:function(){var t=Math.max(1,E-1);w(t)},children:"\u2190"}),(0,p.jsx)("div",{className:u().currentStepVisualization,children:(0,p.jsx)(V,{step:m.data.steps[E-1],yourEntry:m.data.yourEntry})}),(0,p.jsx)("div",{className:"".concat(u().stepArrow," ").concat(b&&u().hidden),onClick:function(){var t,e,n=Math.min((null===m||void 0===m||null===(t=m.data)||void 0===t||null===(e=t.steps)||void 0===e?void 0:e.length)||0,E+1);w(n)},children:"\u2192"})]}),(0,p.jsxs)("div",{className:u().yourVoteExampleContainer,children:[(0,p.jsx)(o.Z,{variant:"subtitle2",children:"Your vote is seen with border:"}),(0,p.jsx)(j,{voteCount:1,candidateStyleProp:u().yourVoteExample})]})]})]})}},2745:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/poll/[id]/results",function(){return n(8562)}])},8966:function(t){t.exports={vote:"StepVisualization_vote__1OkW4",candidateName:"StepVisualization_candidateName__2YBsd",candidate0:"StepVisualization_candidate0__2j86i",candidate1:"StepVisualization_candidate1__3aU4r",candidate2:"StepVisualization_candidate2__24xLG",candidate3:"StepVisualization_candidate3__142sE",candidate4:"StepVisualization_candidate4__jREZn",candidate5:"StepVisualization_candidate5__1Yr7e",candidate6:"StepVisualization_candidate6__2anFi",candidate7:"StepVisualization_candidate7__3gdP8",candidate8:"StepVisualization_candidate8__1MulU",yourVote:"StepVisualization_yourVote__2xwP1"}},822:function(t){t.exports={voteLine:"VoteLine_voteLine__1UAR8"}},4822:function(t){t.exports={textField:"results_textField__1P36j",candidateTextField:"results_candidateTextField__1l04i",updatePollButton:"results_updatePollButton__1tkdj",yourVote:"results_yourVote__3pDok",stepContainer:"results_stepContainer__3gE2Y",stepCounter:"results_stepCounter__1MRQi",currentStepVisualization:"results_currentStepVisualization__rvcBw",stepArrow:"results_stepArrow__2RafK",hidden:"results_hidden__jKYhy",yourVoteExampleContainer:"results_yourVoteExampleContainer__3HKeA",yourVoteExample:"results_yourVoteExample__1paSp"}}},function(t){t.O(0,[859,549,774,888,179],(function(){return e=2745,t(t.s=e);var e}));var e=t.O();_N_E=e}]);