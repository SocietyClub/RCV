(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{3549:function(e,t,n){"use strict";var r=n(4836);t.Z=void 0;var a=r(n(4938)),i=n(5893),o=(0,a.default)((0,i.jsx)("path",{d:"M2 12c0 5.52 4.48 10 10 10s10-4.48 10-10S17.52 2 12 2 2 6.48 2 12zm10-1h4v2h-4v3l-4-4 4-4v3z"}),"ArrowCircleLeft");t.Z=o},7976:function(e,t,n){"use strict";var r=n(4836);t.Z=void 0;var a=r(n(4938)),i=n(5893),o=(0,a.default)((0,i.jsx)("path",{d:"M22 12c0-5.52-4.48-10-10-10S2 6.48 2 12s4.48 10 10 10 10-4.48 10-10zm-10 1H8v-2h4V8l4 4-4 4v-3z"}),"ArrowCircleRight");t.Z=o},754:function(e,t,n){"use strict";n.d(t,{Z:function(){return N}});var r=n(3366),a=n(7462),i=n(7294),o=n(6010),s=n(4780),c=n(917),l=n(6622),d=n(5959),u=n(7074),m=n(4867);function h(e){return(0,m.Z)("MuiCircularProgress",e)}(0,n(1588).Z)("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);var f=n(5893);const p=["className","color","disableShrink","size","style","thickness","value","variant"];let v,x,g,j,y=e=>e;const S=44,_=(0,c.F4)(v||(v=y`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`)),C=(0,c.F4)(x||(x=y`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -125px;
  }
`)),Z=(0,u.ZP)("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`color${(0,l.Z)(n.color)}`]]}})((({ownerState:e,theme:t})=>(0,a.Z)({display:"inline-block"},"determinate"===e.variant&&{transition:t.transitions.create("transform")},"inherit"!==e.color&&{color:(t.vars||t).palette[e.color].main})),(({ownerState:e})=>"indeterminate"===e.variant&&(0,c.iv)(g||(g=y`
      animation: ${0} 1.4s linear infinite;
    `),_))),k=(0,u.ZP)("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(e,t)=>t.svg})({display:"block"}),b=(0,u.ZP)("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.circle,t[`circle${(0,l.Z)(n.variant)}`],n.disableShrink&&t.circleDisableShrink]}})((({ownerState:e,theme:t})=>(0,a.Z)({stroke:"currentColor"},"determinate"===e.variant&&{transition:t.transitions.create("stroke-dashoffset")},"indeterminate"===e.variant&&{strokeDasharray:"80px, 200px",strokeDashoffset:0})),(({ownerState:e})=>"indeterminate"===e.variant&&!e.disableShrink&&(0,c.iv)(j||(j=y`
      animation: ${0} 1.4s ease-in-out infinite;
    `),C)));var N=i.forwardRef((function(e,t){const n=(0,d.Z)({props:e,name:"MuiCircularProgress"}),{className:i,color:c="primary",disableShrink:u=!1,size:m=40,style:v,thickness:x=3.6,value:g=0,variant:j="indeterminate"}=n,y=(0,r.Z)(n,p),_=(0,a.Z)({},n,{color:c,disableShrink:u,size:m,thickness:x,value:g,variant:j}),C=(e=>{const{classes:t,variant:n,color:r,disableShrink:a}=e,i={root:["root",n,`color${(0,l.Z)(r)}`],svg:["svg"],circle:["circle",`circle${(0,l.Z)(n)}`,a&&"circleDisableShrink"]};return(0,s.Z)(i,h,t)})(_),N={},w={},E={};if("determinate"===j){const e=2*Math.PI*((S-x)/2);N.strokeDasharray=e.toFixed(3),E["aria-valuenow"]=Math.round(g),N.strokeDashoffset=`${((100-g)/100*e).toFixed(3)}px`,w.transform="rotate(-90deg)"}return(0,f.jsx)(Z,(0,a.Z)({className:(0,o.Z)(C.root,i),style:(0,a.Z)({width:m,height:m},w,v),ownerState:_,ref:t,role:"progressbar"},E,y,{children:(0,f.jsx)(k,{className:C.svg,ownerState:_,viewBox:"22 22 44 44",children:(0,f.jsx)(b,{className:C.circle,style:N,ownerState:_,cx:S,cy:S,r:(S-x)/2,fill:"none",strokeWidth:x})})}))}))},3408:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/poll/[id]/results",function(){return n(1009)}])},6e3:function(e,t,n){"use strict";var r=n(5893),a=n(7294),i=n(9243),o=n(2741),s=n(1973),c=n.n(s),l=function(e){var t=(0,a.useState)(!1),n=t[0],s=t[1],l=(0,a.useState)(null),d=l[0],u=l[1],m=function(){s(!1)};return(0,a.useEffect)((function(){e.alert?(u(e.alert),s(!0)):m()}),[e.alert]),(0,r.jsxs)("div",{className:c().page,children:[(0,r.jsxs)("div",{className:c().contentContainer,children:[(0,r.jsx)("div",{className:c().mainContent,children:e.children}),e.sidebar]}),(0,r.jsx)(i.Z,{open:n,onClose:m,autoHideDuration:e.autoHideAlertMilliSeconds,children:(0,r.jsxs)(o.Z,{onClose:m,severity:null===d||void 0===d?void 0:d.severity,children:[null===d||void 0===d?void 0:d.message,(null===d||void 0===d?void 0:d.errorMessages)&&d.errorMessages.map((function(e){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("br",{}),e.messageContent]})}))]})})]})};l.defaultProps={alert:null},t.Z=l},9542:function(e,t,n){"use strict";n.d(t,{Dq:function(){return i},Gm:function(){return o},Ms:function(){return a},QP:function(){return r},Qh:function(){return s},zF:function(){return c}});var r=function(e,t){return fetch("/api/v1/poll",{method:"POST",mode:"cors",headers:{"Content-Type":"application/json","X-USER-ID":e},body:JSON.stringify(t)}).then((function(e){return e.ok?e:e.json().then((function(e){return Promise.reject({data:e.data,messages:e.messages})}))})).then((function(e){return e.json()}))},a=function(e,t,n){return fetch("/api/v1/poll/".concat(t),{method:"PATCH",mode:"cors",headers:{"Content-Type":"application/json","X-USER-ID":e},body:JSON.stringify(n)}).then((function(e){return e.ok?e:e.json().then((function(e){return Promise.reject({data:e.data,messages:e.messages})}))})).then((function(e){return e.json()}))},i=function(e,t){return fetch("/api/v1/poll/".concat(t),{method:"GET",mode:"cors",headers:{"Content-Type":"application/json","X-USER-ID":e}}).then((function(e){return e.ok?e:e.json().then((function(e){return Promise.reject({data:e.data,messages:e.messages})}))})).then((function(e){return e.json()}))},o=function(e,t){return fetch("/api/v1/poll/".concat(t,"/vote"),{method:"GET",mode:"cors",headers:{"Content-Type":"application/json","X-USER-ID":e}}).then((function(e){return e.ok?e:e.json().then((function(e){return Promise.reject({data:e.data,messages:e.messages})}))})).then((function(e){return e.json()}))},s=function(e,t,n){return fetch("/api/v1/poll/".concat(t,"/vote"),{method:"POST",mode:"cors",headers:{"Content-Type":"application/json","X-USER-ID":e},body:JSON.stringify(n)}).then((function(e){return e.ok?e:e.json().then((function(e){return Promise.reject({data:e.data,messages:e.messages})}))})).then((function(e){return e.json()}))},c=function(e,t){return fetch("/api/v1/poll/".concat(t,"/results"),{method:"GET",mode:"cors",headers:{"Content-Type":"application/json","X-USER-ID":e}}).then((function(e){return e.ok?e:e.json().then((function(e){return Promise.reject({data:e.data,messages:e.messages})}))})).then((function(e){return e.json()}))}},4153:function(e,t,n){"use strict";n.d(t,{i:function(){return l}});var r=n(1799),a=n(9396),i=n(9815),o=n(7294),s=n(9817),c={data:null,messages:[],isLoading:!1,isSuccess:!1,isInitial:!0};function l(e){var t=(0,o.useState)(c),n=t[0],l=t[1],d=(0,s.C)();return[n,function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return l((0,a.Z)((0,r.Z)({},c),{isLoading:!0,isInitial:!1})),e.apply(void 0,[String(d)].concat((0,i.Z)(n))).then((function(e){var t={data:e.data,messages:e.messages,isLoading:!1,isSuccess:!0,isInitial:!1};return l(t),t})).catch((function(e){var t={data:e.data,messages:e.messages,isLoading:!1,isSuccess:!1,isInitial:!1};return l(t),Promise.reject(t)}))}]}},1009:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return O}});var r=n(828),a=n(5893),i=n(7294),o=n(1163),s=n(3549),c=n(7976),l=n(754),d=n(9630),u=n(6e3),m=function(e){return{"--bg-color":h(e||0)}},h=function(e){var t=137.508*e%35+50;return"hsl(".concat(137.508*e,", 100%, ").concat(t,"%)")},f=n(9208),p=n.n(f),v=n(5314),x=n.n(v),g=function(e){return(0,a.jsx)(a.Fragment,{children:Array(e.voteCount).fill(0).map((function(t,n){return(0,a.jsx)("div",{style:m(e.candidateStyleNumber||0),className:"".concat(e.candidateStyleProp," ").concat(x().voteLine)},n)}))})};g.defaultProps={};var j=g,y=function(e){var t,n,r,o,s=new Map;e.step.candidateList.map((function(e){return e.name})).sort().forEach((function(e,t){return s.set(e,t)}));var c=function(e,t){if(!e.choices)return"";var n=!0,r=!1,a=void 0;try{for(var i,o=e.choices[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var s=i.value,c=!0,l=!1,d=void 0;try{for(var u,m=t.candidateList[Symbol.iterator]();!(c=(u=m.next()).done);c=!0){var h=u.value;if(!h.isEliminated&&s.candidate.name===h.name)return h.name}}catch(f){l=!0,d=f}finally{try{c||null==m.return||m.return()}finally{if(l)throw d}}}}catch(f){r=!0,a=f}finally{try{n||null==o.return||o.return()}finally{if(r)throw a}}}(e.yourEntry,e.step),l=null===(t=e.yourEntry)||void 0===t||null===(n=t.choices)||void 0===n||null===(r=n[0])||void 0===r||null===(o=r.candidate)||void 0===o?void 0:o.name;return(0,a.jsx)("div",{style:{display:"flex"},children:(0,a.jsx)("div",{style:{width:"100%",padding:"1.5rem"},children:e.step.candidateList.map((function(e){return(0,a.jsxs)("div",{className:p().vote,children:[(0,a.jsx)("div",{className:"".concat(p().candidateName," ").concat(e.isEliminated?p().isEliminated:""),style:m(s.get(e.name)),children:(0,a.jsx)(d.Z,{variant:"subtitle2",children:e.name})}),e.votes.map((function(t){return c===e.name&&l===t.firstChoiceCandidate?(0,a.jsxs)(i.Fragment,{children:[(0,a.jsx)(j,{voteCount:1,candidateStyleNumber:s.get(t.firstChoiceCandidate),candidateStyleProp:p().yourVote}),(0,a.jsx)(j,{voteCount:t.voteCount-1,candidateStyleNumber:s.get(t.firstChoiceCandidate),candidateStyleProp:""})]},t.firstChoiceCandidate):(0,a.jsx)(j,{voteCount:t.voteCount,candidateStyleNumber:s.get(t.firstChoiceCandidate),candidateStyleProp:p()["candidate"+s.get(t.firstChoiceCandidate)]},t.firstChoiceCandidate)}))]},e.name)}))})})};y.defaultProps={};var S=y,_=n(4153),C=n(9542),Z=n(5668),k=n.n(Z);var b=function(e){var t,n=e.pollId,o=(0,r.Z)((0,_.i)(C.Gm),2),s=o[0],c=o[1];return(0,i.useEffect)((function(){n&&c(n)}),[n]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.Z,{variant:"h5",children:"Your Choices were:"}),(0,a.jsx)("div",{className:k().spacer}),!s.isInitial&&!s.isSuccess&&(0,a.jsx)(a.Fragment,{children:"You have not voted yet"}),s.data&&(null===s||void 0===s||null===(t=s.data)||void 0===t?void 0:t.map((function(e,t){return(0,a.jsxs)("div",{className:k().choiceWrapper,children:[(0,a.jsxs)(d.Z,{variant:"h5",children:[t+1,":"]}),(0,a.jsx)("div",{className:k().candidateName,children:(0,a.jsx)(d.Z,{variant:"subtitle2",children:e.candidate.name})})]},t)})))]})},N=n(1520),w=n.n(N),E=n(5084),P=n(7568),F=n(9815),V=n(4051),z=n.n(V),D=n(1953),I=n(6727),A=n(9281),L=n(9817),R=n(3714),M=n.n(R);function T(e){var t=e.open,n=e.onClose,r=e.endFormStatus,o=e.setEndFormStatus,s=(0,i.useState)(),c=s[0],l=s[1],u=(0,i.useState)(),m=u[0],h=u[1],f=(0,i.useState)(""),p=f[0],v=f[1],x=(0,i.useState)(""),g=x[0],j=x[1],y=(0,L.C)();if(void 0===r||"filled"===r||!1===t)return null;function S(){return(S=(0,P.Z)(z().mark((function e(){var t,n,r;return z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=void 0===m||!(0<=m&&m<=10),!(t=void 0===c||!(0<=c&&c<=3))&&!n){e.next=5;break}return t&&n?alert("Understanding response and recommendation response are required"):t?alert("Understanding response is required"):n&&alert("Recommendation response is required"),e.abrupt("return");case 5:return r="https://docs.google.com/forms/d/e/1FAIpQLSf_ElYFRkokcozeVod1p6WMOW4-ZroxyQqhNz2M3xnqz8qzkQ/formResponse?usp=pp_url&entry.627021736=".concat(y,"&entry.675560448=").concat(c,"&entry.1077870871=").concat(m,"&entry.2039317476=").concat(p,"&entry.1229452016=").concat(g,"&submit=Submit"),o("filled"),e.next=9,fetch(r,{mode:"no-cors"});case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,a.jsx)(I.Z,{open:t,onClose:n,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,a.jsxs)(D.Z,{className:M().modal,children:[(0,a.jsxs)(D.Z,{children:[(0,a.jsx)(d.Z,{id:"modal-modal-title",variant:"h6",component:"h2",children:"I understand Ranked Choice Voting:"}),(0,a.jsxs)(D.Z,{sx:{display:"flex",flexDirection:"column",justifyContent:"left",margin:"1rem"},children:[(0,a.jsx)(E.Z,{onClick:function(){return l(0)},variant:0==c?"contained":"outlined",sx:{marginBottom:"0.5rem"},children:"Strongly Disagree"}),(0,a.jsx)(E.Z,{onClick:function(){return l(1)},variant:1==c?"contained":"outlined",sx:{marginBottom:"0.5rem"},children:"Disagree"}),(0,a.jsx)(E.Z,{onClick:function(){return l(2)},variant:2==c?"contained":"outlined",sx:{marginBottom:"0.5rem"},children:"Agree"}),(0,a.jsx)(E.Z,{onClick:function(){return l(3)},variant:3==c?"contained":"outlined",children:"Strongly Agree"})]})]}),(0,a.jsxs)(D.Z,{children:[(0,a.jsx)(d.Z,{id:"modal-modal-title",variant:"h6",component:"h2",children:"On a scale from 0 to 10, how likely are you to recommend this product to a friend or colleague?"}),(0,a.jsx)(D.Z,{sx:{display:"flex",justifyContent:"center",margin:"1rem",columnGap:"0.5rem"},children:(0,F.Z)(Array.from(Array(11).keys())).map((function(e){return(0,a.jsx)(E.Z,{onClick:function(){return h(e)},variant:m==e?"contained":"outlined",className:M().numberBox,children:e},e)}))})]}),(0,a.jsxs)(D.Z,{children:[(0,a.jsx)(d.Z,{id:"modal-modal-title",variant:"h6",component:"h2",children:"Do you have any other feedback (Optional)?"}),(0,a.jsx)(A.Z,{className:M().textField,id:"outlined-basic",label:"Your feedback here.",variant:"outlined",multiline:!0,rows:2,onChange:function(e){return v(e.target.value)}})]}),(0,a.jsxs)(D.Z,{children:[(0,a.jsx)(d.Z,{className:M().textField,id:"modal-modal-title",variant:"h6",component:"h2",children:"Email address (Optional, subscribe to our future projects):"}),(0,a.jsx)(A.Z,{className:M().textField,id:"outlined-basic",label:"Email address.",variant:"outlined",onChange:function(e){return j(e.target.value)}})]}),(0,a.jsx)(D.Z,{sx:{display:"flex",justifyContent:"center"},children:(0,a.jsx)(E.Z,{variant:"contained",onClick:function(){!function(){S.apply(this,arguments)}()},children:"Submit"})})]})})}function W(){var e=(0,i.useState)(),t=e[0],n=e[1],r=(0,i.useState)(!1),o=r[0],s=r[1],c="endFormStatus";return(0,i.useEffect)((function(){n(localStorage.getItem(c)||"not_filled")}),[n]),void 0===t||"filled"===t?null:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(E.Z,{variant:"contained",onClick:function(){return s(!0)},children:"Please take our survey!"}),(0,a.jsx)(T,{open:o,onClose:function(){s(!1)},endFormStatus:t,setEndFormStatus:function(e){"filled"==e&&(localStorage.setItem(c,"filled"),n("filled"))}})]})}var O=function(){var e,t,n=(0,o.useRouter)(),m=n.query.id,h=(0,r.Z)((0,_.i)(C.zF),2),f=h[0],p=h[1],v=(0,i.useState)(null),x=v[0],g=v[1],y=(0,i.useState)(1),Z=y[0],k=y[1];(0,i.useEffect)((function(){n.isReady&&p(String(m))}),[m]),(0,i.useEffect)((function(){f.isInitial||(f.isLoading||f.isSuccess||g({severity:"error",message:"An error has occured while loading the poll results"}),(f.isLoading||f.isSuccess)&&g(null))}),[f.isInitial,f.isLoading,f.isSuccess]);var N=Z<=1,E=Z>=((null===f||void 0===f||null===(e=f.data)||void 0===e||null===(t=e.steps)||void 0===t?void 0:t.length)||0);return(0,a.jsxs)(u.Z,{alert:x,children:[f.isLoading&&(0,a.jsxs)("div",{children:[(0,a.jsx)(d.Z,{variant:"h3",children:"Loading Poll"}),(0,a.jsx)(l.Z,{})]}),!f.isLoading&&f.data&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("h2",{children:["Poll Question: ",f.data.pollName]}),f.data.steps.length>0?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("h3",{children:["Winner: ",f.data.winner]}),(0,a.jsx)("div",{className:w().stepCounter,children:(0,a.jsxs)(d.Z,{variant:"subtitle2",children:["Step: ",Z," out of ",f.data.steps.length]})}),(0,a.jsxs)("div",{className:w().stepContainer,children:[(0,a.jsx)("div",{className:w().stepArrowWrapper,children:(0,a.jsx)("div",{className:"".concat(w().stepArrow," ").concat(N&&w().hidden),onClick:function(){var e=Math.max(1,Z-1);k(e)},children:(0,a.jsx)(s.Z,{fontSize:"large"})})}),(0,a.jsx)("div",{className:w().currentStepVisualization,children:(0,a.jsx)(S,{step:f.data.steps[Z-1],yourEntry:f.data.yourEntry})}),(0,a.jsx)("div",{className:w().stepArrowWrapper,children:(0,a.jsx)("div",{className:"".concat(w().stepArrow," ").concat(E&&w().hidden),onClick:function(){var e,t,n=Math.min((null===f||void 0===f||null===(e=f.data)||void 0===e||null===(t=e.steps)||void 0===t?void 0:t.length)||0,Z+1);k(n)},children:(0,a.jsx)(c.Z,{fontSize:"large"})})})]}),(0,a.jsxs)("div",{className:w().yourVoteExampleContainer,children:[(0,a.jsx)(d.Z,{variant:"subtitle2",children:"Your vote is seen with border:"}),(0,a.jsx)(j,{candidateStyleNumber:0,voteCount:1,candidateStyleProp:w().yourVoteExample})]}),(0,a.jsx)(W,{}),(0,a.jsx)("div",{className:w().yourVote,children:(0,a.jsx)(b,{pollId:String(m)})}),(0,a.jsx)("div",{style:{marginBottom:"3rem"}})]}):(0,a.jsx)(d.Z,{variant:"h4",children:"There are currently no votes placed for this poll"})]})]})}},1973:function(e){e.exports={page:"Page_page__WUVFs",contentContainer:"Page_contentContainer__BRpFP",mainContent:"Page_mainContent__Wuje1"}},9208:function(e){e.exports={vote:"StepVisualization_vote__eDJsK",candidateColorWidth:"StepVisualization_candidateColorWidth__njddk",candidateName:"StepVisualization_candidateName__GOVEa",yourVote:"StepVisualization_yourVote__Zr0zE",isEliminated:"StepVisualization_isEliminated__gHpk_"}},5314:function(e){e.exports={voteLine:"VoteLine_voteLine__rVhph"}},5668:function(e){e.exports={spacer:"YourVote_spacer__GXq1a",choiceWrapper:"YourVote_choiceWrapper__JAfzq",candidateName:"YourVote_candidateName__zgG5B"}},1520:function(e){e.exports={textField:"results_textField__IZ602",candidateTextField:"results_candidateTextField__O2_NK",updatePollButton:"results_updatePollButton__YHmr7",yourVote:"results_yourVote__HJkhq",stepContainer:"results_stepContainer__XDICs",stepCounter:"results_stepCounter__3WBaH",currentStepVisualization:"results_currentStepVisualization__hrLR0",stepArrowWrapper:"results_stepArrowWrapper__d3rmD",stepArrow:"results_stepArrow__2EWHt",hidden:"results_hidden__wb78f",yourVoteExampleContainer:"results_yourVoteExampleContainer__o2C9q",yourVoteExample:"results_yourVoteExample__UXsKw"}}},function(e){e.O(0,[318,281,774,888,179],(function(){return t=3408,e(e.s=t);var t}));var t=e.O();_N_E=t}]);