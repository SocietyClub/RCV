(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{8456:function(e,t,n){"use strict";n.d(t,{Z:function(){return E}});var r=n(3366),i=n(7462),a=n(7294),s=n(6010),o=n(4780),c=n(917),d=n(8216),l=n(7623),u=n(1496),h=n(4867);function f(e){return(0,h.Z)("MuiCircularProgress",e)}(0,n(1588).Z)("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);var v=n(5893);const m=["className","color","disableShrink","size","style","thickness","value","variant"];let p,g,x,y,_=e=>e;const j=44,S=(0,c.F4)(p||(p=_`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`)),C=(0,c.F4)(g||(g=_`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -125px;
  }
`)),Z=(0,u.ZP)("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`color${(0,d.Z)(n.color)}`]]}})((({ownerState:e,theme:t})=>(0,i.Z)({display:"inline-block"},"determinate"===e.variant&&{transition:t.transitions.create("transform")},"inherit"!==e.color&&{color:(t.vars||t).palette[e.color].main})),(({ownerState:e})=>"indeterminate"===e.variant&&(0,c.iv)(x||(x=_`
      animation: ${0} 1.4s linear infinite;
    `),S))),b=(0,u.ZP)("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(e,t)=>t.svg})({display:"block"}),k=(0,u.ZP)("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.circle,t[`circle${(0,d.Z)(n.variant)}`],n.disableShrink&&t.circleDisableShrink]}})((({ownerState:e,theme:t})=>(0,i.Z)({stroke:"currentColor"},"determinate"===e.variant&&{transition:t.transitions.create("stroke-dashoffset")},"indeterminate"===e.variant&&{strokeDasharray:"80px, 200px",strokeDashoffset:0})),(({ownerState:e})=>"indeterminate"===e.variant&&!e.disableShrink&&(0,c.iv)(y||(y=_`
      animation: ${0} 1.4s ease-in-out infinite;
    `),C)));var E=a.forwardRef((function(e,t){const n=(0,l.Z)({props:e,name:"MuiCircularProgress"}),{className:a,color:c="primary",disableShrink:u=!1,size:h=40,style:p,thickness:g=3.6,value:x=0,variant:y="indeterminate"}=n,_=(0,r.Z)(n,m),S=(0,i.Z)({},n,{color:c,disableShrink:u,size:h,thickness:g,value:x,variant:y}),C=(e=>{const{classes:t,variant:n,color:r,disableShrink:i}=e,a={root:["root",n,`color${(0,d.Z)(r)}`],svg:["svg"],circle:["circle",`circle${(0,d.Z)(n)}`,i&&"circleDisableShrink"]};return(0,o.Z)(a,f,t)})(S),E={},P={},N={};if("determinate"===y){const e=2*Math.PI*((j-g)/2);E.strokeDasharray=e.toFixed(3),N["aria-valuenow"]=Math.round(x),E.strokeDashoffset=`${((100-x)/100*e).toFixed(3)}px`,P.transform="rotate(-90deg)"}return(0,v.jsx)(Z,(0,i.Z)({className:(0,s.Z)(C.root,a),style:(0,i.Z)({width:h,height:h},P,p),ownerState:S,ref:t,role:"progressbar"},N,_,{children:(0,v.jsx)(b,{className:C.svg,ownerState:S,viewBox:"22 22 44 44",children:(0,v.jsx)(k,{className:C.circle,style:E,ownerState:S,cx:j,cy:j,r:(j-g)/2,fill:"none",strokeWidth:g})})}))}))},3408:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/poll/[id]/results",function(){return n(9466)}])},6323:function(e,t,n){"use strict";var r=n(5893),i=n(108),a=n.n(i),s=n(5861);t.Z=function(e){var t=e.children,n={backgroundColor:"rgba(0, 0, 0, 0.12)",color:"rgba(0, 0, 0, 0.38)",border:"1px solid rgba(0, 0, 0, 0.12)",borderRadius:"4px",zIndex:-1,width:e.width};return(0,r.jsx)("div",{className:a().candidateBoxSize+" "+a().centered,style:n,children:(0,r.jsx)(s.Z,{variant:"h5",children:t})})}},4007:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var r=n(5893),i=n(7294),a=n(6798),s=n(1737),o=n(7102),c=n.n(o),d=function(e){return(0,r.jsx)("div",{className:c().sidebar,children:e.children})},l=n(1973),u=n.n(l),h=function(e){var t=(0,i.useState)(!1),n=t[0],o=t[1],c=(0,i.useState)(null),d=c[0],l=c[1],h=function(){o(!1)};return(0,i.useEffect)((function(){e.alert?(l(e.alert),o(!0)):h()}),[e.alert]),(0,r.jsxs)("div",{className:u().page,children:[(0,r.jsxs)("div",{className:u().contentContainer,children:[(0,r.jsx)("div",{className:u().mainContent,children:e.children}),e.sidebar]}),(0,r.jsx)(a.Z,{open:n,onClose:h,autoHideDuration:e.autoHideAlertMilliSeconds,children:(0,r.jsxs)(s.Z,{onClose:h,severity:null===d||void 0===d?void 0:d.severity,children:[null===d||void 0===d?void 0:d.message,(null===d||void 0===d?void 0:d.errorMessages)&&d.errorMessages.map((function(e){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("br",{}),e.messageContent]})}))]})})]})};h.defaultProps={sidebar:(0,r.jsx)(d,{}),alert:null};var f=h},9542:function(e,t,n){"use strict";n.d(t,{Dq:function(){return a},Gm:function(){return s},Ms:function(){return i},QP:function(){return r},Qh:function(){return o},zF:function(){return c}});var r=function(e,t){return fetch("/api/v1/poll",{method:"POST",mode:"cors",headers:{"Content-Type":"application/json","X-USER-ID":e},body:JSON.stringify(t)}).then((function(e){return e.ok?e:e.json().then((function(e){return Promise.reject({data:e.data,messages:e.messages})}))})).then((function(e){return e.json()}))},i=function(e,t,n){return fetch("/api/v1/poll/".concat(t),{method:"PATCH",mode:"cors",headers:{"Content-Type":"application/json","X-USER-ID":e},body:JSON.stringify(n)}).then((function(e){return e.ok?e:e.json().then((function(e){return Promise.reject({data:e.data,messages:e.messages})}))})).then((function(e){return e.json()}))},a=function(e,t){return fetch("/api/v1/poll/".concat(t),{method:"GET",mode:"cors",headers:{"Content-Type":"application/json","X-USER-ID":e}}).then((function(e){return e.ok?e:e.json().then((function(e){return Promise.reject({data:e.data,messages:e.messages})}))})).then((function(e){return e.json()}))},s=function(e,t){return fetch("/api/v1/poll/".concat(t,"/vote"),{method:"GET",mode:"cors",headers:{"Content-Type":"application/json","X-USER-ID":e}}).then((function(e){return e.ok?e:e.json().then((function(e){return Promise.reject({data:e.data,messages:e.messages})}))})).then((function(e){return e.json()}))},o=function(e,t,n){return fetch("/api/v1/poll/".concat(t,"/vote"),{method:"POST",mode:"cors",headers:{"Content-Type":"application/json","X-USER-ID":e},body:JSON.stringify(n)}).then((function(e){return e.ok?e:e.json().then((function(e){return Promise.reject({data:e.data,messages:e.messages})}))})).then((function(e){return e.json()}))},c=function(e,t){return fetch("/api/v1/poll/".concat(t,"/results"),{method:"GET",mode:"cors",headers:{"Content-Type":"application/json","X-USER-ID":e}}).then((function(e){return e.ok?e:e.json().then((function(e){return Promise.reject({data:e.data,messages:e.messages})}))})).then((function(e){return e.json()}))}},393:function(e,t,n){"use strict";n.d(t,{i:function(){return u}});var r=n(1799),i=n(9396),a=n(9815),s=n(7294),o=n(828),c=n(708),d=n(5934),l={data:null,messages:[],isLoading:!1,isSuccess:!1,isInitial:!0};function u(e){var t=(0,s.useState)(l),n=t[0],u=t[1],h=function(){var e=(0,o.Z)((0,c.Z)(["X-USER-ID"]),3),t=e[0],n=e[1];if(e[2],!t["X-USER-ID"]){var r=(0,d.Z)();return n("X-USER-ID",r,{path:"/"}),r}return t["X-USER-ID"]}();return[n,function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return u((0,i.Z)((0,r.Z)({},l),{isLoading:!0,isInitial:!1})),e.apply(void 0,[String(h)].concat((0,a.Z)(n))).then((function(e){var t={data:e.data,messages:e.messages,isLoading:!1,isSuccess:!0,isInitial:!1};return u(t),t})).catch((function(e){var t={data:e.data,messages:e.messages,isLoading:!1,isSuccess:!1,isInitial:!1};return u(t),Promise.reject(t)}))}]}},9466:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return k}});var r=n(828),i=n(5893),a=n(1163),s=n(7294),o=n(5861),c=n(8456),d=n(4007),l=n(1520),u=n.n(l),h=n(9542),f=n(393),v=n(6323);var m=function(e){var t,n=e.pollId,a=(0,r.Z)((0,f.i)(h.Gm),2),o=a[0],c=a[1];return(0,s.useEffect)((function(){n&&c(n)}),[n]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{style:{margin:"1rem"},children:"Your Choices:"}),!o.isInitial&&!o.isSuccess&&(0,i.jsx)(i.Fragment,{children:"You have not voted yet"}),o.data&&(null===o||void 0===o||null===(t=o.data)||void 0===t?void 0:t.map((function(e,t){return(0,i.jsx)(v.Z,{width:"100%",children:e.candidate.name},t)})))]})},p=function(e){return{"--bg-color":g(e||0)}},g=function(e){return"hsl(".concat(137.508*e,", 100%, 50%)")},x=n(9208),y=n.n(x),_=n(5314),j=n.n(_),S=function(e){return(0,i.jsx)(i.Fragment,{children:Array(e.voteCount).fill(0).map((function(t,n){return(0,i.jsx)("div",{style:p(e.candidateStyleNumber||0),className:"".concat(e.candidateStyleProp," ").concat(j().voteLine)},n)}))})};S.defaultProps={};var C=S,Z=function(e){var t,n,r,a,c=new Map;e.step.candidateList.map((function(e){return e.name})).sort().forEach((function(e,t){return c.set(e,t)}));var d=function(e,t){if(!e.choices)return"";var n=!0,r=!1,i=void 0;try{for(var a,s=e.choices[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value,c=!0,d=!1,l=void 0;try{for(var u,h=t.candidateList[Symbol.iterator]();!(c=(u=h.next()).done);c=!0){var f=u.value;if(!f.isEliminated&&o.candidate.name===f.name)return f.name}}catch(v){d=!0,l=v}finally{try{c||null==h.return||h.return()}finally{if(d)throw l}}}}catch(v){r=!0,i=v}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}}(e.yourEntry,e.step),l=null===(t=e.yourEntry)||void 0===t||null===(n=t.choices)||void 0===n||null===(r=n[0])||void 0===r||null===(a=r.candidate)||void 0===a?void 0:a.name;return(0,i.jsx)("div",{children:e.step.candidateList.map((function(e){return(0,i.jsxs)("div",{className:y().vote,children:[(0,i.jsx)("div",{style:p(c.get(e.name)),className:"".concat(y().candidateName," ").concat(y()["candidate"+c.get(e.name)]," ").concat(e.isEliminated?y().isEliminated:""),children:(0,i.jsx)(o.Z,{variant:"subtitle2",children:e.name})}),e.votes.map((function(t){return d===e.name&&l===t.firstChoiceCandidate?(0,i.jsxs)(s.Fragment,{children:[(0,i.jsx)(C,{voteCount:1,candidateStyleNumber:c.get(t.firstChoiceCandidate),candidateStyleProp:"".concat(y()["candidate"+c.get(t.firstChoiceCandidate)]," ").concat(y().yourVote)}),(0,i.jsx)(C,{voteCount:t.voteCount-1,candidateStyleNumber:c.get(t.firstChoiceCandidate),candidateStyleProp:y()["candidate"+c.get(t.firstChoiceCandidate)]})]},t.firstChoiceCandidate):(0,i.jsx)(C,{voteCount:t.voteCount,candidateStyleNumber:c.get(t.firstChoiceCandidate),candidateStyleProp:y()["candidate"+c.get(t.firstChoiceCandidate)]},t.firstChoiceCandidate)}))]},e.name)}))})};Z.defaultProps={};var b=Z,k=function(){var e,t,n=(0,a.useRouter)(),l=n.query.id,v=(0,r.Z)((0,f.i)(h.zF),2),p=v[0],g=v[1],x=(0,s.useState)(null),y=x[0],_=x[1],j=(0,s.useState)(1),S=j[0],Z=j[1];(0,s.useEffect)((function(){n.isReady&&g(String(l))}),[l]),(0,s.useEffect)((function(){p.isInitial||(p.isLoading||p.isSuccess||_({severity:"error",message:"An error has occured while loading the poll results"}),(p.isLoading||p.isSuccess)&&_(null))}),[p.isInitial,p.isLoading,p.isSuccess]);var k=S<=1,E=S>=((null===p||void 0===p||null===(e=p.data)||void 0===e||null===(t=e.steps)||void 0===t?void 0:t.length)||0);return(0,i.jsxs)(d.Z,{alert:y,children:[p.isLoading&&(0,i.jsxs)("div",{children:[(0,i.jsx)(o.Z,{variant:"h3",children:"Loading Poll"}),(0,i.jsx)(c.Z,{})]}),!p.isLoading&&p.data&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(o.Z,{variant:"h2",children:["Poll Question: ",p.data.pollName]}),p.data.steps.length>0?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(o.Z,{variant:"h3",children:["Winner: ",p.data.winner]}),(0,i.jsx)("div",{className:u().stepCounter,children:(0,i.jsxs)(o.Z,{variant:"subtitle2",children:["Step: ",S," out of ",p.data.steps.length]})}),(0,i.jsxs)("div",{className:u().stepContainer,children:[(0,i.jsx)("div",{className:u().yourVote,children:(0,i.jsx)(m,{pollId:String(l)})}),(0,i.jsx)("div",{className:"".concat(u().stepArrow," ").concat(k&&u().hidden),onClick:function(){var e=Math.max(1,S-1);Z(e)},children:"\u2190"}),(0,i.jsx)("div",{className:u().currentStepVisualization,children:(0,i.jsx)(b,{step:p.data.steps[S-1],yourEntry:p.data.yourEntry})}),(0,i.jsx)("div",{className:"".concat(u().stepArrow," ").concat(E&&u().hidden),onClick:function(){var e,t,n=Math.min((null===p||void 0===p||null===(e=p.data)||void 0===e||null===(t=e.steps)||void 0===t?void 0:t.length)||0,S+1);Z(n)},children:"\u2192"})]}),(0,i.jsxs)("div",{className:u().yourVoteExampleContainer,children:[(0,i.jsx)(o.Z,{variant:"subtitle2",children:"Your vote is seen with border:"}),(0,i.jsx)(C,{candidateStyleNumber:0,voteCount:1,candidateStyleProp:u().yourVoteExample})]})]}):(0,i.jsx)(o.Z,{variant:"h4",children:"There are currently no votes placed for this poll"})]})]})}},1973:function(e){e.exports={page:"Page_page__WUVFs",contentContainer:"Page_contentContainer__BRpFP",mainContent:"Page_mainContent__Wuje1"}},7102:function(e){e.exports={sidebar:"Sidebar_sidebar__78n6f"}},9208:function(e){e.exports={vote:"StepVisualization_vote__eDJsK",candidateName:"StepVisualization_candidateName__GOVEa",yourVote:"StepVisualization_yourVote__Zr0zE",isEliminated:"StepVisualization_isEliminated__gHpk_"}},5314:function(e){e.exports={voteLine:"VoteLine_voteLine__rVhph"}},108:function(e){e.exports={candidateBoxSize:"shared_candidateBoxSize__tv5GK",centered:"shared_centered__3NXpX"}},1520:function(e){e.exports={textField:"results_textField__IZ602",candidateTextField:"results_candidateTextField__O2_NK",updatePollButton:"results_updatePollButton__YHmr7",yourVote:"results_yourVote__HJkhq",stepContainer:"results_stepContainer__XDICs",stepCounter:"results_stepCounter__3WBaH",currentStepVisualization:"results_currentStepVisualization__hrLR0",stepArrow:"results_stepArrow__2EWHt",hidden:"results_hidden__wb78f",yourVoteExampleContainer:"results_yourVoteExampleContainer__o2C9q",yourVoteExample:"results_yourVoteExample__UXsKw"}}},function(e){e.O(0,[133,774,888,179],(function(){return t=3408,e(e.s=t);var t}));var t=e.O();_N_E=t}]);