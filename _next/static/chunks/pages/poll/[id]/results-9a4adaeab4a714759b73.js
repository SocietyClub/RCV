(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{6165:function(e,t,n){"use strict";n.d(t,{Z:function(){return h}});var i=n(7294),a=n(1002),r=n(6186),o=n(7512),s=n.n(o),c=n(5893),d=function(e){return(0,c.jsx)("div",{className:s().sidebar,children:e.children})},l=n(9035),u=n.n(l),f=function(e){var t=(0,i.useState)(!1),n=t[0],o=t[1],s=(0,i.useState)(null),d=s[0],l=s[1],f=function(){o(!1)};return(0,i.useEffect)((function(){e.alert?(l(e.alert),o(!0)):f()}),[e.alert]),(0,c.jsxs)("div",{className:u().page,children:[(0,c.jsxs)("div",{className:u().contentContainer,children:[(0,c.jsx)("div",{className:u().mainContent,children:e.children}),e.sidebar]}),(0,c.jsx)(a.Z,{open:n,onClose:f,autoHideDuration:e.autoHideAlertMilliSeconds,children:(0,c.jsx)(r.Z,{onClose:f,severity:null===d||void 0===d?void 0:d.severity,children:null===d||void 0===d?void 0:d.message})})]})};f.defaultProps={sidebar:(0,c.jsx)(d,{}),alert:null};var h=f},7392:function(e,t,n){"use strict";n.d(t,{QP:function(){return a},Ms:function(){return r},Dq:function(){return o},Qh:function(){return s},zF:function(){return c}});var i="http://localhost:8080",a=function(e,t){return fetch("".concat(i,"/ranked-choice-vote/v1/poll"),{method:"POST",mode:"cors",headers:{"Content-Type":"application/json","X-USER-ID":e},body:JSON.stringify(t)}).then((function(e){return e.ok?e:e.json().then((function(e){return Promise.reject({data:null,messages:[]})}))})).then((function(e){return e.json()}))},r=function(e,t,n){return fetch("".concat(i,"/ranked-choice-vote/v1/poll/").concat(t),{method:"PATCH",mode:"cors",headers:{"Content-Type":"application/json","X-USER-ID":e},body:JSON.stringify(n)}).then((function(e){return e.ok?e:e.json().then((function(e){return Promise.reject({data:null,messages:[]})}))})).then((function(e){return e.json()}))},o=function(e,t){return fetch("".concat(i,"/ranked-choice-vote/v1/poll/").concat(t),{method:"GET",mode:"cors",headers:{"Content-Type":"application/json","X-USER-ID":e}}).then((function(e){return e.ok?e:e.json().then((function(e){return Promise.reject({data:null,messages:[]})}))})).then((function(e){return e.json()}))},s=function(e,t,n){return fetch("".concat(i,"/ranked-choice-vote/v1/poll/").concat(t,"/vote"),{method:"POST",mode:"cors",headers:{"Content-Type":"application/json","X-USER-ID":e},body:JSON.stringify(n)}).then((function(e){return e.ok?e:e.json().then((function(e){return Promise.reject({data:null,messages:[]})}))})).then((function(e){return e.json()}))},c=function(e,t){return fetch("".concat(i,"/ranked-choice-vote/v1/poll/").concat(t,"/results"),{method:"GET",mode:"cors",headers:{"Content-Type":"application/json","X-USER-ID":e}}).then((function(e){console.log(e);return Promise.resolve({messages:[],data:{pollId:"test-do-not-deleto",pollName:"This is a test poll",totalEntries:13,totalSteps:3,maxNumRankedChoiceCount:2,winner:"spoodermann",steps:[{stepId:0,candidateList:[{name:"spoodermann",eliminated:!1,votes:[{firstChoiceCandidate:"spoodermann",voteCount:3}]},{name:"batman",eliminated:!1,votes:[{firstChoiceCandidate:"batman",voteCount:4}]},{name:"peach",eliminated:!1,votes:[{firstChoiceCandidate:"peach",voteCount:3}]},{name:"mario",eliminated:!1,votes:[{firstChoiceCandidate:"mario",voteCount:2}]},{name:"luigi",eliminated:!1,votes:[{firstChoiceCandidate:"luigi",voteCount:1}]}]},{stepId:1,candidateList:[{name:"spoodermann",eliminated:!1,votes:[{firstChoiceCandidate:"spoodermann",voteCount:3},{firstChoiceCandidate:"luigi",voteCount:1}]},{name:"batman",eliminated:!1,votes:[{firstChoiceCandidate:"batman",voteCount:4}]},{name:"peach",eliminated:!1,votes:[{firstChoiceCandidate:"peach",voteCount:3}]},{name:"mario",eliminated:!1,votes:[{firstChoiceCandidate:"mario",voteCount:2}]},{name:"luigi",eliminated:!0,votes:[{firstChoiceCandidate:"luigi",voteCount:1}]}]},{stepId:2,candidateList:[{name:"spoodermann",eliminated:!1,votes:[{firstChoiceCandidate:"spoodermann",voteCount:3},{firstChoiceCandidate:"luigi",voteCount:1},{firstChoiceCandidate:"mario",voteCount:2}]},{name:"batman",eliminated:!1,votes:[{firstChoiceCandidate:"batman",voteCount:4}]},{name:"peach",eliminated:!1,votes:[{firstChoiceCandidate:"peach",voteCount:3}]},{name:"mario",eliminated:!0,votes:[{firstChoiceCandidate:"mario",voteCount:2}]},{name:"luigi",eliminated:!0,votes:[{firstChoiceCandidate:"luigi",voteCount:1}]}]}],yourEntry:{choices:[{choicePosition:0,candidate:{name:"mario"}},{choicePosition:1,candidate:{name:"spoodermann"}}]}}})}))}},2175:function(e,t,n){"use strict";n.d(t,{i:function(){return u}});var i=n(2809),a=n(7294),r=n(318),o=n(6645),s=n(4586);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var l={data:null,messages:[],isLoading:!1,isSuccess:!1,isInitial:!0};function u(e){var t=(0,a.useState)(l),n=t[0],i=t[1],c=function(){var e=(0,o.Z)(["X-USER-ID"]),t=(0,r.Z)(e,3),n=t[0],i=t[1];if(t[2],!n["X-USER-ID"]){var a=(0,s.Z)();return i("X-USER-ID",a,{path:"/"}),a}return n["X-USER-ID"]}();return[n,function(){i(d(d({},l),{},{isLoading:!0,isInitial:!1}));for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return e.apply(void 0,[String(c)].concat(n)).then((function(e){var t={data:e.data,messages:e.messages,isLoading:!1,isSuccess:!0,isInitial:!1};return i(t),t})).catch((function(e){var t={data:e.data,messages:e.messages,isLoading:!1,isSuccess:!1,isInitial:!1};return i(t),t}))}]}},6076:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return G}});var i=n(318),a=n(1163),r=n(7294),o=n(2658),s=n(3366),c=n(7462),d=(n(5697),n(6010)),l=n(7463),u=n(917),f=n(8216),h=n(6122),m=n(9602),v=n(1420);function p(e){return(0,v.Z)("MuiCircularProgress",e)}(0,n(1271).Z)("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);var C=n(5893);const _=["className","color","disableShrink","size","style","thickness","value","variant"];let y,g,S,j,x=e=>e;const b=44,P=(0,u.F4)(y||(y=x`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`)),k=(0,u.F4)(g||(g=x`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -125px;
  }
`)),w=(0,m.ZP)("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`color${(0,f.Z)(n.color)}`]]}})((({ownerState:e,theme:t})=>(0,c.Z)({display:"inline-block"},"determinate"===e.variant&&{transition:t.transitions.create("transform")},"inherit"!==e.color&&{color:t.palette[e.color].main})),(({ownerState:e})=>"indeterminate"===e.variant&&(0,u.iv)(S||(S=x`
      animation: ${0} 1.4s linear infinite;
    `),P))),E=(0,m.ZP)("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(e,t)=>t.svg})({display:"block"}),Z=(0,m.ZP)("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.circle,t[`circle${(0,f.Z)(n.variant)}`],n.disableShrink&&t.circleDisableShrink]}})((({ownerState:e,theme:t})=>(0,c.Z)({stroke:"currentColor"},"determinate"===e.variant&&{transition:t.transitions.create("stroke-dashoffset")},"indeterminate"===e.variant&&{strokeDasharray:"80px, 200px",strokeDashoffset:0})),(({ownerState:e})=>"indeterminate"===e.variant&&!e.disableShrink&&(0,u.iv)(j||(j=x`
      animation: ${0} 1.4s ease-in-out infinite;
    `),k)));var N=r.forwardRef((function(e,t){const n=(0,h.Z)({props:e,name:"MuiCircularProgress"}),{className:i,color:a="primary",disableShrink:r=!1,size:o=40,style:u,thickness:m=3.6,value:v=0,variant:y="indeterminate"}=n,g=(0,s.Z)(n,_),S=(0,c.Z)({},n,{color:a,disableShrink:r,size:o,thickness:m,value:v,variant:y}),j=(e=>{const{classes:t,variant:n,color:i,disableShrink:a}=e,r={root:["root",n,`color${(0,f.Z)(i)}`],svg:["svg"],circle:["circle",`circle${(0,f.Z)(n)}`,a&&"circleDisableShrink"]};return(0,l.Z)(r,p,t)})(S),x={},P={},k={};if("determinate"===y){const e=2*Math.PI*((b-m)/2);x.strokeDasharray=e.toFixed(3),k["aria-valuenow"]=Math.round(v),x.strokeDashoffset=`${((100-v)/100*e).toFixed(3)}px`,P.transform="rotate(-90deg)"}return(0,C.jsx)(w,(0,c.Z)({className:(0,d.Z)(j.root,i),style:(0,c.Z)({width:o,height:o},P,u),ownerState:S,ref:t,role:"progressbar"},k,g,{children:(0,C.jsx)(E,{className:j.svg,ownerState:S,viewBox:"22 22 44 44",children:(0,C.jsx)(Z,{className:j.circle,style:x,ownerState:S,cx:b,cy:b,r:(b-m)/2,fill:"none",strokeWidth:m})})}))})),V=n(6165),O=n(4822),D=n.n(O),I=n(7392),L=n(2175);var R=function(){return(0,C.jsx)("div",{children:"Placeholder - To be replaced based on Binam's components"})},z=n(8966),A=n.n(z),T=n(822),M=n.n(T),F=function(e){return(0,C.jsx)(C.Fragment,{children:Array(e.voteCount).fill(0).map((function(t,n){return(0,C.jsx)("div",{className:"".concat(e.candidateStyleProp," ").concat(M().voteLine)},n)}))})};F.defaultProps={};var U=F;function X(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return $(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var B=function(e){var t=new Map;e.step.candidateList.forEach((function(e,n){return t.set(e.name,n)}));var n=function(e,t){var n,i=X(e.choices);try{for(i.s();!(n=i.n()).done;){var a,r=n.value,o=X(t.candidateList);try{for(o.s();!(a=o.n()).done;){var s=a.value;if(!s.eliminated&&r.candidate.name===s.name)return s.name}}catch(c){o.e(c)}finally{o.f()}}}catch(c){i.e(c)}finally{i.f()}}(e.yourEntry,e.step),i=e.yourEntry.choices[0].candidate.name;return(0,C.jsx)("div",{children:e.step.candidateList.map((function(e){return(0,C.jsxs)("div",{className:A().vote,children:[(0,C.jsx)("div",{className:"".concat(A().candidateName," ").concat(A()["candidate"+t.get(e.name)]),children:(0,C.jsx)(o.Z,{variant:"body1",children:e.name})}),e.votes.filter((function(){return!e.eliminated})).map((function(a){return n===e.name&&i===a.firstChoiceCandidate?(0,C.jsxs)(r.Fragment,{children:[(0,C.jsx)(U,{voteCount:1,candidateStyleProp:"".concat(A()["candidate"+t.get(a.firstChoiceCandidate)]," ").concat(A().yourVote)}),(0,C.jsx)(U,{voteCount:a.voteCount-1,candidateStyleProp:A()["candidate"+t.get(a.firstChoiceCandidate)]})]},a.firstChoiceCandidate):(0,C.jsx)(U,{voteCount:a.voteCount,candidateStyleProp:A()["candidate"+t.get(a.firstChoiceCandidate)]},a.firstChoiceCandidate)}))]},e.name)}))})};B.defaultProps={};var H=B,G=function(){var e,t,n=(0,a.useRouter)(),s=n.query.id,c=(0,L.i)(I.zF),d=(0,i.Z)(c,2),l=d[0],u=d[1],f=(0,r.useState)(null),h=f[0],m=f[1],v=(0,r.useState)(1),p=v[0],_=v[1];(0,r.useEffect)((function(){n.isReady&&u(String(s))}),[s]),(0,r.useEffect)((function(){l.isInitial||(l.isLoading||l.isSuccess||m({severity:"error",message:"An error has occured while loading the poll results"}),(l.isLoading||l.isSuccess)&&m(null))}),[l.isInitial,l.isLoading,l.isSuccess]);var y=p<=1,g=p>=((null===l||void 0===l||null===(e=l.data)||void 0===e||null===(t=e.steps)||void 0===t?void 0:t.length)||0);return(0,C.jsxs)(V.Z,{alert:h,children:[l.isLoading&&(0,C.jsxs)("div",{children:[(0,C.jsx)(o.Z,{variant:"h3",children:"Loading Poll"}),(0,C.jsx)(N,{})]}),!l.isLoading&&l.data&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)(o.Z,{variant:"h2",children:["Poll Question: ",l.data.pollName]}),(0,C.jsxs)(o.Z,{variant:"h3",children:["Winner: ",l.data.winner]}),(0,C.jsx)("div",{className:D().stepCounter,children:(0,C.jsxs)(o.Z,{variant:"subtitle2",children:["Step: ",p," out of ",l.data.steps.length]})}),(0,C.jsxs)("div",{className:D().stepContainer,children:[(0,C.jsx)("div",{className:D().yourVote,children:(0,C.jsx)(R,{})}),(0,C.jsx)("div",{className:"".concat(D().stepArrow," ").concat(y&&D().hidden),onClick:function(){var e=Math.max(1,p-1);_(e)},children:"\u2190"}),(0,C.jsx)("div",{className:D().currentStepVisualization,children:(0,C.jsx)(H,{step:l.data.steps[p-1],yourEntry:l.data.yourEntry})}),(0,C.jsx)("div",{className:"".concat(D().stepArrow," ").concat(g&&D().hidden),onClick:function(){var e,t,n=Math.min((null===l||void 0===l||null===(e=l.data)||void 0===e||null===(t=e.steps)||void 0===t?void 0:t.length)||0,p+1);_(n)},children:"\u2192"})]}),(0,C.jsxs)("div",{className:D().yourVoteExampleContainer,children:[(0,C.jsx)(o.Z,{variant:"subtitle2",children:"Your vote is seen with border:"}),(0,C.jsx)(U,{voteCount:1,candidateStyleProp:D().yourVoteExample})]})]})]})}},2745:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/poll/[id]/results",function(){return n(6076)}])},9035:function(e){e.exports={page:"Page_page__1hHHt",contentContainer:"Page_contentContainer__12rAS",mainContent:"Page_mainContent__GcSbW"}},7512:function(e){e.exports={sidebar:"Sidebar_sidebar__1wPFG"}},8966:function(e){e.exports={vote:"StepVisualization_vote__1OkW4",candidateName:"StepVisualization_candidateName__2YBsd",candidate0:"StepVisualization_candidate0__2j86i",candidate1:"StepVisualization_candidate1__3aU4r",candidate2:"StepVisualization_candidate2__24xLG",candidate3:"StepVisualization_candidate3__142sE",candidate4:"StepVisualization_candidate4__jREZn",candidate5:"StepVisualization_candidate5__1Yr7e",candidate6:"StepVisualization_candidate6__2anFi",candidate7:"StepVisualization_candidate7__3gdP8",candidate8:"StepVisualization_candidate8__1MulU",yourVote:"StepVisualization_yourVote__2xwP1"}},822:function(e){e.exports={voteLine:"VoteLine_voteLine__1UAR8"}},4822:function(e){e.exports={textField:"results_textField__1P36j",candidateTextField:"results_candidateTextField__1l04i",updatePollButton:"results_updatePollButton__1tkdj",yourVote:"results_yourVote__3pDok",stepContainer:"results_stepContainer__3gE2Y",stepCounter:"results_stepCounter__1MRQi",currentStepVisualization:"results_currentStepVisualization__rvcBw",stepArrow:"results_stepArrow__2RafK",hidden:"results_hidden__jKYhy",yourVoteExampleContainer:"results_yourVoteExampleContainer__3HKeA",yourVoteExample:"results_yourVoteExample__1paSp"}}},function(e){e.O(0,[859,774,888,179],(function(){return t=2745,e(e.s=t);var t}));var t=e.O();_N_E=t}]);